<Document file="StarVMC/Geometry/PixlGeo3">

<Module name="PIXLGEO3" comment=" is the the STAR pixel detector and beam pipe support "  >
  <Created date="  10/02/06 "  />
  <Author name="Andrew Rose"  />
  <CDE  >
    AGECOM
    GCUNIT
  </CDE>
        
  <varlist type="float"  >
    angle,anglePos,angleCorr,raddeg
  </varlist>
        
  <varlist type="int"  >
    nLadder,nSector,nExtraLadder
  </varlist>
        
  <Content> PXMO,PSEC,PLMO,PLAC,PLPS,PXBX</Content>
  

  <Structure name="PXLV"  >
    <var name="version"  type="int"  />
    <var name="LadVer"   type="float"  />
    <var name="location" type="float" />
  </Structure>
        

  <Structure name="PXLD"  >
    <var name="version" type="float"  />
    <var name="TotalLength" type="float"  />
    <var name="LadderWidth" type="float"  />
    <var name="LadderThk" type="float"  />
    <var name="PassiveThk" type="float"  />
    <var name="ActiveThk" type="float"  />
    <var name="Rin" type="float"  />
    <var name="Rout" type="float"  />
  </Structure>
        
  <Structure name="PIXG"  >
    <var name="Ladder" type="float"  />
    <var name="r" type="float"  />
    <var name="a" type="float"  />
    <var name="pOffset" type="float"  />
    <var name="aOffset" type="float"  />
  </Structure>
        
  <Structure name="PXBG"  >
    <var name="version" type="float"  />
    <var name="Length" type="float"  />
    <var name="Rin" type="float"  />
    <var name="Thk" type="float"  />
  </Structure>
  
  <Fill name="PXLV" comment="Pixel ladder data"  >
    <var name="Version" value="1.0" comment=" config version "  />
    <var name="LadVer" value="1.0" comment=" Ladder Version "  />
    <var name="location" value="1.0" comment="Location: 1=CAVE, 2=IDSM" />
  </Fill>
        

  <Fill name="PXLD" comment="Pixel ladder data"  >
    <var name="Version" value="1.0" comment=" version "  />
    <var name="TotalLength" value="20.0" comment=" Overal length of the detector "  />
    <var name="LadderWidth" value="2.00" comment=" Ladder Width "  />
    <var name="LadderThk" value="0.0240" comment=" Total ladder Thickness "  />
    <var name="PassiveThk" value="0.0220" comment=" Passive silicon Thickness "  />
    <var name="ActiveThk" value="0.0020" comment=" Active  silicon Thickness "  />
    <var name="Rin" value="2.4" comment=" Inner radius "  />
    <var name="Rout" value="8.3" comment=" Outer radius "  />
  </Fill>
  

  <Fill name="PXLD" comment="Pixel ladder data"  >
    <var name="Version" value="2.0" comment=" version "  />
    <var name="LadderWidth" value="2.00" comment=" Ladder Width "  />
    <var name="LadderThk" value="0.0240" comment=" Total ladder Thickness "  />
    <var name="PassiveThk" value="0.0120" comment=" Passive silicon Thickness "  />
    <var name="ActiveThk" value="0.0120" comment=" Active  silicon Thickness "  />
    <var name="Rin" value="2.4" comment=" Inner radius "  />
    <var name="Rout" value="8.3" comment=" Outer radius "  />
  </Fill>
        

  <Fill name="PIXG" comment="Pixel detector data"  >
    <var name="Ladder" value="1" comment=" ladder index "  />
    <var name="r" value="2.5" comment=" 1st ladder nominal radius "  />
    <var name="a" value="100." comment=" 1st ladder nominal position angle "  />
    <var name="aOffset" value="103." comment=" Angular offset "  />
    <var name="pOffset" value="0.0" comment=" Position offset (shift) "  />
  </Fill>
        

  <Fill name="PIXG" comment="Pixel detector data"  >
    <var name="Ladder" value="2" comment=" ladder index "  />
    <var name="r" value="2.5" comment=" 2nd ladder nominal radius "  />
    <var name="a" value="60." comment=" 2nd ladder nominal position angle "  />
    <var name="aOffset" value="103." comment=" Angular offset "  />
  </Fill>
        

  <Fill name="PIXG" comment="Pixel detector data"  >
    <var name="Ladder" value="3" comment=" ladder index "  />
    <var name="r" value="2.5" comment=" 2nd ladder nominal radius "  />
    <var name="a" value="20." comment=" 2nd ladder nominal position angle "  />
    <var name="aOffset" value="103." comment=" Angular offset "  />
  </Fill>
        

  
  <Fill name="PIXG" comment="Pixel detector data"  >
    <var name="Ladder" value="4" comment=" ladder index "  />
    <var name="r" value="6.5" comment=" 2nd ladder nominal radius "  />
    <var name="a" value="105." comment=" 2nd ladder nominal position angle "  />
    <var name="aOffset" value="90." comment=" Angular offset "  />
  </Fill>
        
  
  <Fill name="PIXG" comment="Pixel detector data"  >
    <var name="Ladder" value="5" comment=" ladder index "  />
    <var name="r" value="7.5" comment=" 3rd ladder radius "  />
    <var name="a" value="90." comment=" 3rd ladder nominal position angle "  />
    <var name="aOffset" value="90." comment=" Angular offset "  />
  </Fill>
        

  <Fill name="PIXG" comment="Pixel detector data"  >
    <var name="Ladder" value="6" comment=" ladder index "  />
    <var name="r" value="6.5" comment=" 4th ladder nominal radius "  />
    <var name="a" value="75." comment=" 4th ladder nominal position angle "  />
    <var name="aOffset" value="90." comment=" Angular offset "  />
  </Fill>
        


  <Fill name="PIXG" comment="Pixel detector data"  >
    <var name="Ladder" value="7" comment=" ladder index "  />
    <var name="r" value="7.5" comment=" 3rd ladder radius "  />
    <var name="a" value="60." comment=" 3rd ladder nominal position angle "  />
    <var name="aOffset" value="90." comment=" Angular offset "  />
  </Fill>
        

  
  <Fill name="PIXG" comment="Pixel detector data"  >
    <var name="Ladder" value="8" comment=" ladder index "  />
    <var name="r" value="6.5" comment=" 4th ladder nominal radius "  />
    <var name="a" value="45." comment=" 4th ladder nominal position angle "  />
    <var name="aOffset" value="90." comment=" Angular offset "  />
  </Fill>
        


  <Fill name="PIXG" comment="Pixel detector data"  >
    <var name="Ladder" value="9" comment=" ladder index "  />
    <var name="r" value="7.5" comment=" 3rd ladder radius "  />
    <var name="a" value="30." comment=" 3rd ladder nominal position angle "  />
    <var name="aOffset" value="90." comment=" Angular offset "  />
  </Fill>
        


  <Fill name="PIXG" comment="Pixel detector data"  >
    <var name="Ladder" value="10" comment=" ladder index "  />
    <var name="r" value="6.5" comment=" 4th ladder nominal radius "  />
    <var name="a" value="15." comment=" 4th ladder nominal position angle "  />
    <var name="aOffset" value="90." comment=" Angular offset "  />
  </Fill>
  


  <Fill name="PIXG" comment="Pixel detector data"  >
    <var name="Ladder" value="11" comment=" ladder index "  />
    <var name="r" value="7.5" comment=" 3rd ladder radius "  />
    <var name="a" value="0." comment=" 3rd ladder nominal position angle "  />
    <var name="aOffset" value="90." comment=" Angular offset "  />
  </Fill>
  


  <Fill name="PXBG" comment="Beam Pipe Exoskeleton Data"  >
    <var name="version" value="2" comment=" Version "  />
    <var name="Length" value="48.0" comment=" Total Length "  />
    <var name="Rin" value="8.5" comment=" Inner Radius "  />
    <var name="Thk" value="0.1" comment=" Thickness "  />
  </Fill>
  

  <Use struct="PXLV"  />
  <Use struct="PXLD" select="version" value="PXLV_LadVer "  />
  raddeg=3.14159265/180.0 

  <Create block="PXMO"  />
  <If expr="PXLV_location==1.0"> <Placement block="PXMO" in="CAVE"  /> 
  <Else>                         <Placement block="PXMO" in="IDSM"  /></Else></If>

  <Create block="PXBX"  />
  <If expr="PXLV_location==1.0"> <Placement block="PXBX" in="CAVE" />
  <Else>                         <Placement block="PXBX" in="IDSM" /></Else></If>

        
  <Block name="PXMO" comment="is the mother of the pixel detector volumes"  >
    <Material name="Air"  />
    <Attribute for="PXMO" seen="1" colo="6"  />
    
    <Shape type="TUBE" rmax="PXLD_Rout" rmin="PXLD_Rin" dz="PXLD_TotalLength/2.0"  />
    
    
    <Create block="PSEC"  />
    <Do var="nSector" from="1" to="3"  >
      <Placement konly="'MANY'" block="PSEC"  >
	<Rotation alphaz="120.0*(nSector-1)"  />
      </Placement>
      
    </Do>
    

  </Block>
  
  <Block name="PXBX" comment="is the exoskeleton of the beampipe"  >
    <Material name="Berillium"  />
    <Attribute for="PXBX" seen="1" colo="3"  />
    
    <Shape type="TUBE" rmax="PXBG_Rin+PXBG_Thk" rmin="PXBG_Rin" dz="PXBG_Length/2.0"  />
  </Block>
  
  <Block name="PSEC" comment="is a group of ladders"  >
    <Material name="Air"  />
    <Attribute for="PSEC" seen="1" colo="5"  />
    <Shape type="TUBS" rmin="PXLD_Rin" rmax="PXLD_Rout" dz="PXLD_TotalLength/2.0" phi2="122.0" phi1="-11.0"  />
    
    
    <Do var="nLadder" from="1" to="11"  >
      
      <Use struct="PIXG" select="Ladder" value="nLadder "  />
      angle = PIXG_a                  
      anglePos = angle*raddeg               !  +angleCorr  see above comment 
      
      
      <Create block="PLMO"  />
      <Placement y="PIXG_r*sin(anglePos)" x="PIXG_r*cos(anglePos)" z="0.0" block="PLMO"  >
	<Rotation alphaz="-PIXG_aOffset+angle"  />
      </Placement>
                
      
    </Do>
    
    
  </Block>
  
  <Block name="PLMO" comment="is the mother of the silicon ladder"  >
    <Material name="Air"  />
    <Attribute for="PLMO" seen="1" colo="4"  />
    <Shape type="BOX" dz="PXLD_TotalLength/2.0" dx="PXLD_LadderWidth/2.0" dy="PXLD_LadderThk/2.0"  />
    
    <Create block="PLAC"  />
    <Placement y="-PXLD_LadderThk/2.0+PXLD_ActiveThk/2.0" block="PLAC"  >
    </Placement>
    
    <Create block="PLPS"  />
    <Placement y="-PXLD_LadderThk/2.0+PXLD_ActiveThk+PXLD_PassiveThk/2.0" block="PLPS"  >
    </Placement>
    

  </Block>
  
  <Block name="PLAC" comment="is the active layer of the ladder"  >
    <Material name="Silicon"  />
    <Material name="Sensitive" isvol="1"  />
    <Attribute for="PLAC" seen="1" colo="4"  />
    
    <Shape type="BOX" dz="PXLD_TotalLength/2.0" dx="PXLD_LadderWidth/2.0" dy="PXLD_ActiveThk/2.0"  />
    
    <Call expr="%Imed,'STRA',1." routine="GSTPAR"  />
    
    <Instrument block="PLAC"  >
      <Hit meas="z" opts="S" bins=".00001"  />
      <Hit meas="y" bins=".00001"  />
      <Hit meas="x" bins=".00001"  />
      <Hit meas="ptot" nbits="16" min="0" max="100"  />
      <Hit meas="cx" nbits="10"  />
      <Hit meas="cy" nbits="10"  />
      <Hit meas="cz" nbits="10"  />
      <Hit meas="sleng" nbits="16" min="0" max="500"  />
      <Hit meas="tof" nbits="16"  />
      <Hit meas="step" bins=".01"  />
      <Hit meas="eloss" nbits="16"  />
    </Instrument>
    
  </Block>
  
  <Block name="PLPS" comment="is the passive layer of the ladder"  >
    <Material name="Silicon"  />
    <Attribute for="PLPS" seen="1" colo="2"  />
    <Shape type="BOX" dz="PXLD_TotalLength/2.0" dx="PXLD_LadderWidth/2.0" dy="PXLD_PassiveThk/2.0"  />
  </Block>
  
  
</Module>
</Document>

