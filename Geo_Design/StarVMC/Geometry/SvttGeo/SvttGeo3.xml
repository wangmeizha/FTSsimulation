<Document file="StarVMC/Geometry/SvttGeo/SvttGeo3.xml">

    <Module name="SVTTGEO3" comment="  is the SVT geometry for STAR: corrected and without SSD "  >
        <Author name="Maxim Potekhin"  />
        <Created date=" 18 Nov 03 "  />
        <CDE  >
            AGECOM
            GCONST
            GCUNIT
        </CDE>
        
        <Content  >
            SVTT,SLYD,SLSD,SLDI,STLI,STSI,SVTD,SBER,STAB,STRU,SPCB,SRHC,SBWC,SWCM,SXAI,SXBI,SELE,SWCH,SWCW,SWCS,SBOI,SAGP,SDYE,SECA,SIRP,SIRT,SOER,SCON,SROD,SGRA,STAP,STAC,SHLA,SHLB,SHMA,SHMB,SWHO,SHWA,SCMY,SCAL,SWMM,SWMB,SWRP,SXRL,SYRU,SWMT,SWMS,SWMW,SOTB,SITB,SBRG,SBRM,SBRI,SOES,SIES,SOSM,SISM,SCRW,SGLA,SBSP,SAKM,SCKM,SBSR,SBCR,SBRX,SBRL,SBMM,SBMO,SBMI,SMRD,SALM,SISH,SSSH,SOSH,SCBM,SCBL,SFED,SPLS,SOUM,SOUR
        </Content>
        
        <Structure name="SVTG"  >
            <var name="Version" type="float"  />
            <var name="Nlayer" type="int"  />
            <var name="RsizeMin" type="float"  />
            <var name="RsizeMax" type="float"  />
            <var name="ZsizeMax" type="float"  />
            <var name="Angoff" type="float"  />
            <var name="SupportVer" type="float"  />
            <var name="ConeVer" type="float"  />
            <var name="ifMany" type="float"  />
            <var name="Nmin" type="float"  />
        </Structure>
        
        <Structure name="SWCA"  >
            <var name="Version" type="float"  />
            <var name="Length" type="float"  />
            <var name="WaferWid" type="float"  />
            <var name="WaferLen" type="float"  />
            <var name="WaferThk" type="float"  />
            <var name="RohaThk" type="float"  />
            <var name="WafCarWd" type="float"  />
            <var name="WafCarTh" type="float"  />
            <var name="WaferGap" type="float"  />
            <var name="Drift" type="float"  />
            <var name="strutlen" type="float"  />
        </Structure>
        
        <Structure name="SSUP"  >
            <var name="Version" type="float"  />
            <var name="CabThk" type="float"  />
            <var name="HosRmn" type="float"  />
            <var name="HosRmx" type="float"  />
            <var name="Nhoses" type="float"  />
            <var name="WrpMyThk" type="float"  />
            <var name="WrpAlThk" type="float"  />
            <var name="GrphThk" type="float"  />
            <var name="Cone1Zmn" type="float"  />
            <var name="RodLen" type="float"  />
            <var name="RodDist" type="float"  />
            <var name="RodID" type="float"  />
            <var name="RodOD" type="float"  />
            <var name="Con1IdMn" type="float"  />
            <var name="Con3IdMn" type="float"  />
            <var name="Con4IdMn" type="float"  />
            <var name="Con4IdMx" type="float"  />
            <var name="Cone3zmx" type="float"  />
            <var name="Cone4zmx" type="float"  />
            <var name="BraThk" type="float"  />
            <var name="ERJThk" type="float"  />
            <var name="ERJWid" type="float"  />
            <var name="ERJLen" type="float"  />
            <var name="ERJzdis" type="float"  />
            <var name="ERJ1x" type="float"  />
            <var name="ERJ2x" type="float"  />
            <var name="ERJ2y" type="float"  />
            <var name="ERJrad" type="float"  />
            <var name="ERJdia" type="float"  />
        </Structure>
        
        <Structure name="SSUB"  >
            <var name="Version" type="float"  />
            <var name="KMountId" type="float"  />
            <var name="KMountOd" type="float"  />
            <var name="KMntThk" type="float"  />
            <var name="KMCutOd" type="float"  />
            <var name="KMCutId" type="float"  />
            <var name="KMCutOA" type="float"  />
            <var name="KMCutOff" type="float"  />
            <var name="SRingId" type="float"  />
            <var name="SRingOd" type="float"  />
            <var name="SRingThk" type="float"  />
            <var name="SRCutPhi" type="float"  />
            <var name="SRCutWid" type="float"  />
            <var name="SRCutOut" type="float"  />
            <var name="SRCutIn" type="float"  />
            <var name="SRollId" type="float"  />
            <var name="SRollOd" type="float"  />
            <var name="SRollLen" type="float"  />
            <var name="SWireLen" type="float"  />
            <var name="MBlkHgh" type="float"  />
            <var name="MBlkOWid" type="float"  />
            <var name="MBlkOLen" type="float"  />
            <var name="MBlkIWid" type="float"  />
            <var name="MBlkILen" type="float"  />
            <var name="MBlkORad" type="float"  />
            <var name="MBlkIRad" type="float"  />
            <var name="MRodDia" type="float"  />
        </Structure>
        
        <Structure name="SWAM"  >
            <var name="Version" type="float"  />
            <var name="Zmin" type="float"  />
            <var name="Len" type="float"  />
            <var name="Rmin" type="float"  />
            <var name="Rmax" type="float"  />
            <var name="TbrdThk" type="float"  />
            <var name="WallThk" type="float"  />
        </Structure>
        
        <Structure name="SERG"  >
            <var name="Version" type="float"  />
            <var name="IrngTrMx" type="float"  />
            <var name="IrngPrMn" type="float"  />
            <var name="OrngRmin" type="float"  />
            <var name="OrngRmax" type="float"  />
            <var name="EndRngTh" type="float"  />
            <var name="EndRngZm" type="float"  />
        </Structure>
        
        <Structure name="SELC"  >
            <var name="Version" type="float"  />
            <var name="BeThk" type="float"  />
            <var name="WatThk" type="float"  />
            <var name="BeOThk" type="float"  />
            <var name="DyeThk" type="float"  />
            <var name="DyeWid" type="float"  />
            <var name="DyeSpc" type="float"  />
            <var name="ElcaWid" type="float"  />
            <var name="AgPdThk" type="float"  />
            <var name="GlassThk" type="float"  />
            <var name="CabThk" type="float"  />
            <var name="CabWid" type="float"  />
        </Structure>
        
        <Structure name="SVTL"  >
            <var name="Layer" type="int"  />
            <var name="Nladder" type="float"  />
            <var name="Nwafer" type="float"  />
            <var name="Radius" type="float"  />
            <var name="BareEdge" type="float"  />
            <var name="PcbLen" type="float"  />
            <var name="PcbWidth" type="float"  />
            <var name="PcbThk" type="float"  />
            <var name="PcbGap" type="float"  />
        </Structure>
        
        <Structure name="SSLD"  >
            <var name="Version" type="float"  />
            <var name="SInRInn" type="float"  />
            <var name="SInROut" type="float"  />
            <var name="SInLen" type="float"  />
            <var name="SSepRInn" type="float"  />
            <var name="SSepROut" type="float"  />
            <var name="SSepLen" type="float"  />
            <var name="SOutRInn" type="float"  />
            <var name="SOutROut" type="float"  />
            <var name="SOutLen" type="float"  />
            <var name="AlMeshId" type="float"  />
            <var name="AlMeshOd" type="float"  />
            <var name="AlMshThk" type="float"  />
            <var name="AlMshPos" type="float"  />
        </Structure>
        
        <Structure name="SCBP"  >
            <var name="Layer" type="int"  />
            <var name="Len" type="float"  />
            <var name="Rmin1" type="float"  />
            <var name="Rmax1" type="float"  />
            <var name="Rmin2" type="float"  />
            <var name="Rmax2" type="float"  />
            <var name="Vol" type="float"  />
        </Structure>
        
        <Structure name="SFEP"  >
            <var name="Layer" type="int"  />
            <var name="Len" type="float"  />
            <var name="Rmin1" type="float"  />
            <var name="Rmax1" type="float"  />
            <var name="Rmin2" type="float"  />
            <var name="Rmax2" type="float"  />
            <var name="Vol" type="float"  />
            <var name="VolPlast" type="float"  />
        </Structure>
        
        <Structure name="SWCX"  >
            <var name="Layer" type="int"  />
            <var name="Length" type="float"  />
            <var name="dR" type="float"  />
            <var name="offset" type="float"  />
            <var name="rad" type="float"  />
            <var name="wall" type="float"  />
            <var name="rOffset" type="float"  />
        </Structure>
        
        <Structure name="SOUP"  >
            <var name="Version" type="float"  />
            <var name="Length" type="float"  />
            <var name="Rout" type="float"  />
            <var name="dR" type="float"  />
            <var name="Phi1" type="float"  />
            <var name="Phi2" type="float"  />
            <var name="DiamOut" type="float"  />
            <var name="DiamIn" type="float"  />
        </Structure>
        

        <varlist type="INTEGER"  >
            iLayer,s,side,ilad,iwaf,i,j
        </varlist>
        
        <varlist type="REAL"  >
            ladthk,cone_thk1,cone_thk2,roffset,RsizeMax,deg,rad,c0
        </varlist>
        
        <varlist type="REAL"  >
            cone_len,cone_sin,cone_cos,rmin,rmax,zmin,zmax,angle
        </varlist>
        
        <varlist type="REAL"  >
            xpos,ypos,zpos,clearance,rin,rou,elethk,tabLen,radmax
        </varlist>
        
        <varlist type="REAL"  >
            endrng_z,brack_z,screw_z,ir_rmin,ang,wafpckLen,dthk,radtilt
        </varlist>
        
        <varlist type="REAL"  >
            xbuf,phi,xbuf1,xbuf2
        </varlist>
        
        <varlist type="REAL"  >
            yPCB,A,CuThk,sq,tube_angle
        </varlist>
        
        <varlist type="REAL"  >
            radii(6),rad_cones_in(5),rad_cones_out(5),rad_offset,shield_phi(4)
        </varlist>
        
        <varlist type="INTEGER"  >
            i_phi
        </varlist>
        

        radii(1)= 6.37 
        radii(2)= 7.38 
        radii(3)=10.38 
        radii(4)=11.27 
        radii(5)=14.19 
        radii(6)=15.13 
        rad_offset=0.015 
        shield_phi(1)=9.0 
        shield_phi(2)=27.0 
        shield_phi(3)=45.0 
        shield_phi(4)=63.0 
        <Fill name="SVTG" comment="Basic SVT dimensions"  >
            <var name="Version" value="2" comment=" geometry version "  />
            <var name="Nlayer" value="7" comment=" number of svt layers (was 7) "  />
            <var name="RsizeMin" value="4.100" comment=" STV innermost radius "  />
            <var name="RsizeMax" value="46.107" comment=" STV outermost radius "  />
            <var name="ZsizeMax" value="270" comment=" SVT+FTPC length "  />
            <var name="Angoff" value="0" comment=" angular offset x1 for slayer 2 x2 for slayer 3 "  />
            <var name="SupportVer" value="1" comment=" versioning of the shield "  />
            <var name="ConeVer" value="1" comment=" versioning of the support cone "  />
            <var name="ifMany" value="0" comment=" whether we use the geant MANY option "  />
            <var name="Nmin" value="1" comment=" the index of the innermost layer "  />
        </Fill>
        
        <Fill name="SWCA" comment="Wafer Carrier"  >
            <var name="Version" value="1" comment=" geometry version "  />
            <var name="Length" value="56.04" comment=" ladder length "  />
            <var name="WaferWid" value="6.305" comment=" wafer width "  />
            <var name="WaferLen" value="6.305" comment=" wafer length "  />
            <var name="WaferThk" value="0.0300" comment=" wafer thickness "  />
            <var name="RoHaThk" value="0.0381" comment=" Roha cell plus glue thickness  "  />
            <var name="WafCarWd" value="1.5" comment=" wafer carrier rails width "  />
            <var name="WafCarTh" value="0.0300" comment=" wafer carrier thickness  "  />
            <var name="WaferGap" value="0.05" comment=" width of the inter-wafer gap (was 0 in prev versions) "  />
            <var name="Drift" value="1" comment=" drift direction "  />
            <var name="strutlen" value="1.0" comment=" len (z) of strut between waf car. rails (approx) "  />
        </Fill>
        
        <Fill name="SSUP" comment="Support structures"  >
            <var name="Version" value="1" comment=" geometry version "  />
            <var name="CabThk" value="0.05" comment=" thickness of layer of cables on support cone "  />
            <var name="HosRmn" value="0.75" comment=" inner radius of water hoses on support cone "  />
            <var name="HosRmx" value="0.95" comment=" outer radius of water hoses on support cone "  />
            <var name="Nhoses" value="10" comment=" number of water hoses "  />
            <var name="WrpMyThk" value="0.10" comment=" thickness of mylar wrap around cone (guess) "  />
            <var name="WrpAlThk" value="0.01" comment=" thickness of Al on mylar wrap (guess) "  />
            <var name="GrphThk" value="0.16" comment=" support cone thickness "  />
            <var name="Cone1zmn" value="52.23" comment=" Cone z min (parts 1,2,3,4 in increasing z) "  />
            <var name="RodLen" value="110.8" comment=" Length of support rods "  />
            <var name="RodDist" value="17.5" comment=" Distance of support rod od from beam axis  "  />
            <var name="RodID" value="2.5" comment=" ID of Carbon support rods (approx) "  />
            <var name="RodOD" value="3.05" comment=" OD of Carbon support rods (approx) "  />
            <var name="Con1IdMn" value="15.67" comment=" Minimum id of cone 1  "  />
            <var name="Con3IdMn" value="21.67" comment=" Minimum id of cone 3 (TBD) "  />
            <var name="Con4IdMn" value="37.4" comment=" Minimum id of cone 4 (TBD) "  />
            <var name="Con4IdMx" value="37.4" comment=" Maximum id of cone 4 (TBD) "  />
            <var name="Cone3zmx" value="150.0" comment=" Maximum z of cone 3 (TBD) "  />
            <var name="Cone4zmx" value="229.36" comment=" Maximum z of cone 4 (TBD) "  />
            <var name="BraThk" value=".2" comment=" thickness of Al brackets  "  />
            <var name="ERJThk" value=".1" comment=" (z) thickness of end ring joining brackets "  />
            <var name="ERJWid" value="2.07" comment=" (azimuthal) width of end ring joining brackets "  />
            <var name="ERJLen" value="5.19" comment=" (radial) length of end ring joining brackets "  />
            <var name="ERJzdis" value="2.0" comment=" dist from ladder ends to ERJ (guess) "  />
            <var name="ERJ1x" value="0.31" comment=" ERJ screw 1 x position (radial) "  />
            <var name="ERJ2x" value="1.15" comment=" ERJ screw 2 x position "  />
            <var name="ERJ2y" value="0.72" comment=" ERJ screw 2 y position "  />
            <var name="ERJrad" value="10.80" comment=" distance of ERJ center from beam axis "  />
            <var name="ERJdia" value="0.17" comment=" ERJ screw diameter "  />

        </Fill>
        
        <Fill name="SSUP" comment="Support structures"  >
            <var name="Version" value="2" comment=" geometry version "  />
            <var name="CabThk" value="0.21" comment=" thickness of layer of cables on support cone "  />
            <var name="HosRmn" value="0.75" comment=" inner radius of water hoses on support cone "  />
            <var name="HosRmx" value="0.95" comment=" outer radius of water hoses on support cone "  />
            <var name="Nhoses" value="10" comment=" number of water hoses "  />
            <var name="WrpMyThk" value="0.10" comment=" thickness of mylar wrap around cone (guess) "  />
            <var name="WrpAlThk" value="0.01" comment=" thickness of Al on mylar wrap (guess) "  />
            <var name="GrphThk" value="0.16" comment=" support cone thickness "  />
            <var name="Cone1zmn" value="52.23" comment=" Cone z min (parts 1,2,3,4 in increasing z) "  />
            <var name="RodLen" value="110.8" comment=" Length of support rods "  />
            <var name="RodDist" value="17.5" comment=" Distance of support rod od from beam axis  "  />
            <var name="RodID" value="2.5" comment=" ID of Carbon support rods (approx) "  />
            <var name="RodOD" value="3.05" comment=" OD of Carbon support rods (approx) "  />
            <var name="Con1IdMn" value="15.67" comment=" Minimum id of cone 1  "  />
            <var name="Con3IdMn" value="21.67" comment=" Minimum id of cone 3 (TBD) "  />
            <var name="Con4IdMn" value="37.4" comment=" Minimum id of cone 4 (TBD) "  />
            <var name="Con4IdMx" value="37.4" comment=" Maximum id of cone 4 (TBD) "  />
            <var name="Cone3zmx" value="150.0" comment=" Maximum z of cone 3 (TBD) "  />
            <var name="Cone4zmx" value="229.36" comment=" Maximum z of cone 4 (TBD) "  />
            <var name="BraThk" value=".2" comment=" thickness of Al brackets  "  />
            <var name="ERJThk" value=".1" comment=" (z) thickness of end ring joining brackets "  />
            <var name="ERJWid" value="2.07" comment=" (azimuthal) width of end ring joining brackets "  />
            <var name="ERJLen" value="5.19" comment=" (radial) length of end ring joining brackets "  />
            <var name="ERJzdis" value="2.0" comment=" dist from ladder ends to ERJ (guess) "  />
            <var name="ERJ1x" value="0.31" comment=" ERJ screw 1 x position (radial) "  />
            <var name="ERJ2x" value="1.15" comment=" ERJ screw 2 x position "  />
            <var name="ERJ2y" value="0.72" comment=" ERJ screw 2 y position "  />
            <var name="ERJrad" value="10.80" comment=" distance of ERJ center from beam axis "  />
            <var name="ERJdia" value="0.17" comment=" ERJ screw diameter "  />
        </Fill>
        
        <Fill name="SSUB" comment="beampipe support"  >
            <var name="Version" value="1" comment=" geometry version "  />
            <var name="KMountId" value="31.34" comment=" id of beampipe support kinematic mount "  />
            <var name="KMountOd" value="38.96" comment=" od of beampipe support kinematic mount "  />
            <var name="KMntThk" value="0.64" comment=" thickness of support kinematic mount "  />
            <var name="KMCutOd" value="18.31" comment=" od of cutout in kinematic mount "  />
            <var name="KMCutId" value="14" comment=" id of cutout in kinematic mount "  />
            <var name="KMCutOA" value="38" comment=" opening angle of cutout "  />
            <var name="KMCutOff" value="26.58" comment=" offset of cutout center from axis "  />
            <var name="SRingId" value="8.47" comment=" id of beampipe support ring  "  />
            <var name="SRingOd" value="12.78" comment=" od of beampipe support ring "  />
            <var name="SRingThk" value="0.64" comment=" thichkness of beampipe support ring "  />
            <var name="SRCutPhi" value="38" comment=" support ring cutout angle to z-axis "  />
            <var name="SRCutWid" value="3.63" comment=" support ring cutout width "  />
            <var name="SRCutOut" value="5.08" comment=" support ring cutout depth "  />
            <var name="SRCutIn" value="3.5" comment=" support ring cutout start "  />
            <var name="SRollId" value="0.2" comment=" support roller Id "  />
            <var name="SRollOd" value="0.62" comment=" support roller Od "  />
            <var name="SRollLen" value="2.54" comment=" support roller length "  />
            <var name="SWireLen" value="5.08" comment=" support roller axis length "  />
            <var name="MBlkHgh" value="0.97" comment=" mounting block height "  />
            <var name="MBlkOWid" value="2.54" comment=" outer mounting block width "  />
            <var name="MBlkOLen" value="1.27" comment=" outer mounting block length "  />
            <var name="MBlkIWid" value="3.175" comment=" inner mounting block width "  />
            <var name="MBlkILen" value="1.27" comment=" inner mounting block length "  />
            <var name="MBlkORad" value="17.4" comment=" outer mounting block at radius "  />
            <var name="MBlkIRad" value="5.42" comment=" inner mounting block at radius "  />
            <var name="MRodDia" value="0.32" comment=" mounting support rod diameter "  />
        </Fill>
        
        <Fill name="SERG" comment="end rings"  >
            <var name="Version" value="1" comment=" geometry version "  />
            <var name="IrngTrMx" value="9.703" comment=" Inner end ring tube maximum radius  "  />
            <var name="IrngPrMn" value="7.671" comment=" Inner end ring polygon minimum radius "  />
            <var name="OrngRmin" value="11.900" comment=" Outer end ring minimum radius "  />
            <var name="OrngRmax" value="13.805" comment=" Outer end ring maximum radius "  />
            <var name="EndRngTh" value="0.2" comment=" End ring thickness "  />
            <var name="EndRngZm" value="23.01" comment=" minimum z for end rings "  />
        </Fill>
        
        <Fill name="SWAM" comment="water manifold"  >
            <var name="Version" value="1" comment=" geometry version "  />
            <var name="Zmin" value="33.9" comment=" minimum z for positioning water manifold "  />
            <var name="Len" value="16.0" comment=" water manifold full length  "  />
            <var name="Rmin" value="15.24" comment=" water manifold rmin (not including trans. brds) "  />
            <var name="Rmax" value="16.83" comment=" water manifold rmax (not including trans. brds) "  />
            <var name="TbrdThk" value="0.1" comment=" transition board thickness "  />
            <var name="WallThk" value="0.1" comment=" water manifold wall thickness "  />
        </Fill>
        
        <Fill name="SELC" comment="electronics carrier data"  >
            <var name="Version" value="1" comment=" geometry version "  />
            <var name="BeThk" value="0.0500" comment=" thickness of Berillium water channel walls "  />
            <var name="WatThk" value="0.0750" comment=" thickness of water channel "  />
            <var name="BeOThk" value="0.0500" comment=" thickness of Berrillia (BeO) substra "  />
            <var name="DyeThk" value="0.0340" comment=" to give .11% of a radiation length of Si  "  />
            <var name="DyeWid" value="0.3" comment=" width of ic chips (2 covers 0.3 of area) "  />
            <var name="DyeSpc" value="0.1" comment=" space ic chips "  />
            <var name="ElcaWid" value="2.0" comment=" electronics carrier width "  />
            <var name="AgPdThk" value="0.0030" comment=" thickness of Ag-Pd conductor "  />
            <var name="GlassThk" value="0.0150" comment=" thickness of glass insulator "  />
            <var name="CabThk" value="0.0033" comment=" Cu for cables of .23% rad len (weighted average) "  />
            <var name="CabWid" value="0.6" comment=" cable width  "  />
        </Fill>
        
        <Fill name="SVTL" comment="single layer data"  >
            <var name="layer" value="1" comment=" layer number "  />
            <var name="Radius" value="radii(1)+rad_offset" comment=" layer radius (center of wafer position) "  />
            <var name="Nladder" value="4" comment=" number of ladder "  />
            <var name="Nwafer" value="4" comment=" number of wafers "  />
            <var name="BareEdge" value="1.0" comment=" the strip of bare Be which makes the PCB shorter "  />
            <var name="PcbLen" value="14.9" comment=" PCB Length "  />
            <var name="PcbWidth" value="6.3" comment=" PCB Width "  />
            <var name="PcbThk" value="0.1" comment=" PCB Thickness -- should be 0.09, but we add extra for copper "  />
            <var name="PcbGap" value="0.2" comment=" Gap between the PCB and the Si Wafer "  />


        </Fill>
        
        <Fill name="SVTL" comment="single layer parameters"  >
            <var name="layer" value="2" comment=" layer number "  />
            <var name="Radius" value="radii(2)+rad_offset" comment=" layer radius "  />
            <var name="PcbLen" value="14.9" comment=" PCB Length "  />

        </Fill>
        
        <Fill name="SVTL" comment="single layer parameters"  >
            <var name="layer" value="3" comment=" layer number "  />
            <var name="Radius" value="radii(3)+rad_offset" comment=" layer radius "  />
            <var name="Nladder" value="6" comment=" number of ladder "  />
            <var name="Nwafer" value="6" comment=" number of wafers "  />
            <var name="PcbLen" value="7.5" comment=" PCB Length "  />
        </Fill>
        
        <Fill name="SVTL" comment="single layer parameters"  >
            <var name="layer" value="4" comment=" layer number "  />
            <var name="Radius" value="radii(4)+rad_offset" comment=" layer radius "  />
            <var name="PcbLen" value="7.5" comment=" PCB Length "  />
        </Fill>
        
        <Fill name="SVTL" comment="single layer parameters"  >
            <var name="layer" value="5" comment=" layer number "  />
            <var name="Radius" value="radii(5)+rad_offset" comment=" layer radius "  />
            <var name="Nladder" value="8" comment=" number of ladder "  />
            <var name="Nwafer" value="7" comment=" number of wafers "  />
            <var name="PcbLen" value="4.4" comment=" PCB Length "  />
        </Fill>
        
        <Fill name="SVTL" comment="single layer parameters"  >
            <var name="layer" value="6" comment=" layer number "  />
            <var name="Radius" value="radii(6)+rad_offset" comment=" layer radius "  />
            <var name="PcbLen" value="4.4" comment=" PCB Length "  />
        </Fill>
        
        <Fill name="SSLD" comment="shielding parameters"  >
            <var name="version" value="1" comment=" geometry version "  />
            <var name="SInRInn" value="5" comment=" inner shield cylinder, inner radius "  />
            <var name="SInROut" value="5.008" comment=" inner shield cylinder, outer radius "  />
            <var name="SInLen" value="53.5" comment=" inner shield cylinder, half length "  />
            <var name="SSepRInn" value="22" comment=" separation shield cylinder, inner radius "  />
            <var name="SSepROut" value="22.018" comment=" separation shield cylinder, outer radius "  />
            <var name="SSepLen" value="55.4" comment=" separation shield cylinder, half length "  />
            <var name="SOutRInn" value="29.5" comment=" outer shield cylinder, inner radius "  />
            <var name="SOutROut" value="29.52" comment=" outer shield cylinder, outer radius "  />
            <var name="SOutLen" value="65.4" comment=" outer shield cylinder, half length "  />
            <var name="AlMeshId" value="9.7" comment=" Aluminum shield mesh inner diameter "  />
            <var name="AlMeshOd" value="44" comment=" Aluminum shield mesh outer diameter "  />
            <var name="AlMshThk" value="0.03" comment=" Aluminum shield mesh effective thickness "  />
            <var name="AlMshPos" value="53.5" comment=" Aluminum shield mesh z position "  />
        </Fill>
        
        <Fill name="SSLD" comment="shielding parameters"  >
            <var name="version" value="2" comment=" geometry version "  />
            <var name="SInRInn" value="5.7" comment=" inner shield cylinder, inner radius "  />
            <var name="SInROut" value="5.708" comment=" inner shield cylinder, outer radius "  />
        </Fill>
        
        <Do var="i" from="1" to="4"  >
            rad_cones_in(i) = 8.5+2.60*(i-1) 
            rad_cones_out(i)=15.0+0.85*(i-1) 
        </Do>
        

        <Fill name="SCBP" comment="Cabling"  >
            <var name="Layer" value="1" comment=" Layer "  />
            <var name="Len" value="1.85" comment=" Length "  />
            <var name="Rmin1" value="rad_cones_in(1)" comment=" Min radius closer to wafers "  />
            <var name="Rmin2" value="rad_cones_out(1)" comment=" Min radius further from wafers "  />
            <var name="Vol" value="7.24+3.21" comment=" Volume of copper, LV+HV cables "  />
        </Fill>
        
        <Fill name="SCBP" comment="Cabling"  >
            <var name="Layer" value="2" comment=" Layer "  />
            <var name="Rmin1" value="rad_cones_in(2)" comment=" Min radius closer to wafers "  />
            <var name="Rmin2" value="rad_cones_out(2)" comment=" Min radius further from wafers "  />
            <var name="Vol" value="15.54+5.7" comment=" Volume of copper, LV+HV cables "  />
        </Fill>
        
        <Fill name="SCBP" comment="Cabling"  >
            <var name="Layer" value="3" comment=" Layer "  />
            <var name="Rmin1" value="rad_cones_in(3)" comment=" Min radius closer to wafers "  />
            <var name="Rmin2" value="rad_cones_out(3)" comment=" Min radius further from wafers "  />
            <var name="Vol" value="4.05+2.02+3.67+1.69" comment=" Volume of copper, LV+HV cables -- 3+4 layers coalesce "  />
        </Fill>
        
        <Fill name="SCBP" comment="Cabling"  >
            <var name="Layer" value="4" comment=" Layer (former 5th) "  />
            <var name="Rmin1" value="rad_cones_in(4)" comment=" Min radius closer to wafers "  />
            <var name="Rmin2" value="rad_cones_out(4)" comment=" Min radius further from wafers "  />
            <var name="Vol" value="6.95+2.43" comment=" Volume of copper, LV+HV cables "  />
        </Fill>
        
        <Fill name="SFEP" comment="Water feed"  >
            <var name="Layer" value="1" comment=" Layer "  />
            <var name="Len" value="1.85" comment=" Length "  />
            <var name="Rmin1" value="0.5*(rad_cones_in(1) +rad_cones_in(2))" comment=" Min radius closer to wafers "  />
            <var name="Rmin2" value="0.5*(rad_cones_out(1)+rad_cones_out(2))" comment=" Min radius further from wafers "  />
            <var name="Vol" value="16.0" comment=" Volume of water "  />
            <var name="VolPlast" value="38.4" comment=" Volume of plastic "  />
        </Fill>
        
        <Fill name="SFEP" comment="Water feed"  >
            <var name="Layer" value="2" comment=" Layer "  />
            <var name="Rmin1" value="0.5*(rad_cones_in(2) +rad_cones_in(3))" comment=" Min radius closer to wafers "  />
            <var name="Rmin2" value="0.5*(rad_cones_out(2)+rad_cones_out(3))" comment=" Min radius further from wafers "  />
            <var name="Vol" value="24.0" comment=" Volume of water "  />
            <var name="VolPlast" value="57.6" comment=" Volume of plastic "  />
        </Fill>
        
        <Fill name="SFEP" comment="Water feed"  >
            <var name="Layer" value="3" comment=" Layer "  />
            <var name="Rmin1" value="0.5*(rad_cones_in(3) +rad_cones_in(4))" comment=" Min radius closer to wafers "  />
            <var name="Rmin2" value="0.5*(rad_cones_out(3)+rad_cones_out(4))" comment=" Min radius further from wafers "  />
            <var name="Vol" value="32" comment=" Volume of water "  />
            <var name="VolPlast" value="76.8" comment=" Volume of plastic "  />
        </Fill>
        
        <Fill name="SWCX" comment="Segments of the water distribution pipes"  >
            <var name="Layer" value="1" comment=" version "  />
            <var name="Length" value="2.8" comment=" of the ring in the Z direction "  />
            <var name="dR" value="0.72" comment=" thickness of the mother layer "  />
            <var name="rad" value="0.2" comment=" inner plastic tube radius "  />
            <var name="offset" value="-2.0" comment=" from the edge of the ladder support, inward "  />
            <var name="rOffset" value="1.0" comment=" Radial offset "  />
            <var name="wall" value="0.16" comment=" thickness of the plastic pipe wall "  />
        </Fill>
        
        <Fill name="SOUP" comment="Mother of the outer shielding cage, parameters"  >
            <var name="Version" value="1" comment=" Version "  />
            <var name="Length" value="82.5" comment=" Length "  />
            <var name="Rout" value="19.41" comment=" Outer radius of the shield "  />
            <var name="dR" value="0.711" comment=" Diameter of the tubes constituting the cage (also dR of the mother) "  />
            <var name="Phi1" value="0.0" comment=" Starting angle of the mother "  />
            <var name="Phi2" value="70.0" comment=" Finishing angle of the mother "  />
            <var name="DiamOut" value="0.711" comment=" Outer diam of the carbon tube "  />
            <var name="DiamIn" value="0.620" comment=" Inner diam of the carbon tube "  />
        </Fill>
        
        <Use struct="SVTG"  />
        <Use struct="SWCA"  />
        <Use struct="SELC"  />
        <Use struct="SSUP" select="version" value="SVTG_ConeVer "  />
        <Use struct="SSUB"  />
        <Use struct="SERG"  />
        <Use struct="SWAM"  />
        <Use struct="SELC"  />
        <Use struct="SSLD" select="version" value="SVTG_SupportVer "  />
        <Use struct="SCBP"  />
        <Use struct="SWCX"  />
        <Use struct="SOUP"  />

        <If expr="SVTG_SupportVer==2"  >
            SVTG_RsizeMin = 1.4 
        </If>
        

       <Mixture name="G10" dens="1.7"  >
            <Component name="Si" a="28.08" z="14" w="0.6*1*28./60."  />
            <Component name="O" a="16" z="8" w="0.6*2*16./60. + 0.4*4*16./174."  />
            <Component name="C" a="12" z="6" w="0.4*8*12./174."  />
            <Component name="H" a="1"  z="1" w="0.4*14*1./174."  />
        </Mixture>
        

        <Mixture name="ALKAP" dens="1.432"  >
            <Component name="C5" a="12" z="6" w="10000*5"  />
            <Component name="H4" a="1" z="1" w="10000*4"  />
            <Component name="O2" a="16" z="8" w="10000*2"  />
            <Component name="Al" a="27" z="13" w="10000*0.2302"  />
        </Mixture>
        
        <Mixture name="SSDALMY" dens="1.40845"  >
            <Component name="C5" a="12" z="6" w="10000*5"  />
            <Component name="H4" a="1" z="1" w="10000*4"  />
            <Component name="O2" a="16" z="8" w="10000*2"  />
            <Component name="Al" a="27" z="13" w="986"  />
        </Mixture>
        
        <If expr="swam_Len&gt;0"  >
            <Mixture name="Water" dens="1.0"  >
                <Component name="H2" a="1" z="1" w="2"  />
                <Component name="O" a="16" z="8" w="1"  />
            </Mixture>
            
            <Else  >
                <Mixture name="Water" dens="0.0009"  >
                </Mixture>
                
            </Else>
            
        </If>
        

        <If expr="SVTG_ifMany&gt;0"  >
            <Create block="SVTT"  />
            <Placement konly="'MANY'" block="SVTT" in="Cave"  >
            </Placement>
            
            <Else  >
                <Create block="SVTT"  />
                <Placement block="SVTT" in="Cave"  >
                </Placement>
                
            </Else>
            
        </If>
        
        <Block name="SVTT" comment="is the mother of all SVT volumes"  >
            RsizeMax=ssup_Con4IdMx 
            RsizeMax=RsizeMax+ssup_GrphThk+ssup_CabThk+2.0*ssup_HosRmx 
            RsizeMax=RsizeMax+ssup_WrpMyThk+ssup_WrpAlThk 
            Clearance=svtg_RsizeMax-RsizeMax 

            <Material name="Air"  />
            <Attribute for="SVTT" seen="0" colo="1"  />
            <Shape type="TUBE" rmax="svtg_RsizeMax" rmin="svtg_RsizeMin" dz="svtg_ZsizeMax"  />
            <Create block="SIRP"  />
            <Placement z="serg_EndRngZm+serg_EndRngTh/2" block="SIRP"  >
                <Rotation alphaz="22.5"  />
            </Placement>
            
            <Placement z="-serg_EndRngZm-serg_EndRngTh/2" block="SIRP"  >
                <Rotation alphaz="22.5"  />
            </Placement>
            
            <Create block="SIRT"  />
            <Placement z="serg_EndRngZm+serg_EndRngTh/2" block="SIRT"  >
                <Rotation alphaz="22.5"  />
            </Placement>
            
            <Placement z="-serg_EndRngZm-serg_EndRngTh/2" block="SIRT"  >
                <Rotation alphaz="22.5"  />
            </Placement>
            
            <Create block="SOER"  />
            <Placement z="serg_EndRngZm+serg_EndRngTh/2" block="SOER"  >
            </Placement>
            
            <Placement z="-serg_EndRngZm-serg_EndRngTh/2" block="SOER"  >
            </Placement>
            
            <Create block="SBRG"  />
            <Placement z="swca_Length/2+ssup_ERJzdis+ssup_ERJthk/2" block="SBRG"  >
            </Placement>
            
            <Placement z="-swca_Length/2-ssup_ERJzdis-ssup_ERJthk/2" block="SBRG"  >
            </Placement>
            
            endrng_z=serg_EndRngZm+serg_EndRngTh 
            brack_z=swca_Length/2+ssup_ERJzdis 
            screw_z=endrng_z+0.5*(brack_z-endrng_z) 
            <Create block="SOES"  />
            <Placement z="screw_z" konly="'MANY'" block="SOES"  >
            </Placement>
            
            <Placement z="-screw_z" konly="'MANY'" block="SOES"  >
            </Placement>
            
            <Create block="SIES"  />
            <Placement z="screw_z" konly="'MANY'" block="SIES"  >
            </Placement>
            
            <Placement z="-screw_z" konly="'MANY'" block="SIES"  >
            </Placement>
            
            <If expr="swam_Len&gt;0"  >
                <Create block="SWMM"  />
                <Placement z="swam_Zmin+swam_Len/2" block="SWMM"  >
                </Placement>
                
                <Placement z="-swam_Zmin-swam_Len/2" block="SWMM"  >
                </Placement>
                
            </If>
            
            <If expr="swam_Len&gt;0"  >
                <Create block="SBWC"  />
                <Placement z="(swam_Zmin+swam_Len+(ssup_Cone1zmn-(swam_Zmin+swam_Len))/2)" block="SBWC"  >
                </Placement>
                
                <Placement z="-(swam_Zmin+swam_Len+(ssup_Cone1zmn-(swam_Zmin+swam_Len))/2)" block="SBWC"  >
                    <Rotation thetaz="180"  />
                </Placement>
                
            </If>
            
            <Create block="SCON"  />
            <Placement block="SCON"  >
            </Placement>
            
            <Placement block="SCON"  >
                <Rotation thetaz="180"  />
            </Placement>
            
            <Create block="SBSP"  />
            <Placement z="(ssup_RodLen/2-ssub_KMntThk/2)" block="SBSP"  >
            </Placement>
            
            <Placement z="-(ssup_RodLen/2-ssub_KMntThk/2)" block="SBSP"  >
                <Rotation thetaz="180"  />
            </Placement>
            
            <Create block="SROD"  />
            <Placement y="ssup_rodDist+ssup_rodOD/2" block="SROD"  >
            </Placement>
            
            <Placement y="-ssup_rodDist-ssup_rodOD/2" block="SROD"  >
            </Placement>
            
            radmax=svtg_rSizeMax 
            <Do var="ilayer" from="svtg_Nmin" to="min(6,svtg_Nlayer)"  >
                <If expr="ilayer&lt;6"  >
                    <Use struct="SVTL" select="layer" value="ilayer+1 "  />
                    radmax=svtl_radius 
                    <Else  >
                        radmax=svtg_rSizeMax 
                    </Else>
                    
                </If>
                
                <Use struct="SVTL" select="layer" value="ilayer "  />
                <Create block="SLYD"  />
                <If expr="ilayer.eq.2.or.ilayer.eq.4.or.ilayer.eq.6"  >
                    <Placement konly="'MANY'" block="SLYD"  >
                    </Placement>
                    
                    <Else  >
                        <Placement block="SLYD"  >
                        </Placement>
                        
                    </Else>
                    
                </If>
                
            </Do>
            
            <If expr="svtg_Nlayer&lt;0"  >
                <Use struct="SVTL" select="layer" value="-svtg_Nlayer "  />
                <Create block="SLYD"  />
                <Placement block="SLYD"  >
                </Placement>
                
            </If>
            
            <Create block="SISH"  />
            <Placement block="SISH"  >
            </Placement>
            
            <Create block="SOSH"  />
            <Placement block="SOSH"  >
            </Placement>
            
            <If expr="svtg_Nlayer&gt;6"  >
                <Create block="SSSH"  />
                <Placement block="SSSH"  >
                </Placement>
                
            </If>
            
            <Create block="SALM"  />
            <Placement z="ssld_AlMshPos-ssld_AlMshThk/2" block="SALM"  >
            </Placement>
            
            <Placement z="-(ssld_AlMshPos-ssld_AlMshThk/2)" block="SALM"  >
            </Placement>
            

            <Create block="SCBM"  />
            <Placement y="0.0" x="0.0" z="SWAM_Zmin-SCBP_Len" block="SCBM"  >
            </Placement>
            
            <Placement y="0.0" x="0.0" z="-(SWAM_Zmin-SCBP_Len)" block="SCBM"  >
                <Rotation thetaz="180.0"  />
            </Placement>
            

            <Use struct="svtl" select="layer" value="6 "  />
            <Create block="SXRL"  />
            <Placement y="0.0" x="0.0" z="SWCA_Length/2.0-SWCX_Length/2.0-SWCX_offset" konly="'MANY'" block="SXRL"  >
            </Placement>
            
            <Placement y="0.0" x="0.0" z="-SWCA_Length/2.0+SWCX_Length/2.0+SWCX_offset" konly="'MANY'" block="SXRL"  >
            </Placement>
            

            <Use struct="svtl" select="layer" value="4 "  />
            <Create block="SXRL"  />
            <Placement y="0.0" x="0.0" z="SWCA_Length/2.0-SWCX_Length/2.0-SWCX_offset" konly="'MANY'" block="SXRL"  >
            </Placement>
            
            <Placement y="0.0" x="0.0" z="-SWCA_Length/2.0+SWCX_Length/2.0+SWCX_offset" konly="'MANY'" block="SXRL"  >
            </Placement>
            

            <Use struct="svtl" select="layer" value="2 "  />
            <Create block="SXRL"  />
            <Placement y="0.0" x="0.0" z="SWCA_Length/2.0-SWCX_Length/2.0-SWCX_offset" konly="'MANY'" block="SXRL"  >
            </Placement>
            
            <Placement y="0.0" x="0.0" z="-SWCA_Length/2.0+SWCX_Length/2.0+SWCX_offset" konly="'MANY'" block="SXRL"  >
            </Placement>
            

            <Create block="SOUM"  />
            <Placement y="0.0" x="0.0" z="0.0" block="SOUM"  >
            </Placement>
            
            <Placement y="0.0" x="0.0" z="0.0" block="SOUM"  >
                <Rotation alphay="180.0"  />
            </Placement>
            
            <Placement y="0.0" x="0.0" z="0.0" block="SOUM"  >
                <Rotation alphay="180.0"  />
                <Rotation alphaz="180"  />
            </Placement>
            
            <Placement y="0.0" x="0.0" z="0.0" block="SOUM"  >
                <Rotation alphaz="180"  />
            </Placement>
            

        </Block>
        
        <Block name="SXRL" comment="is the mother of the circular water pipes"  >
            <Material name="Air"  />
            <Attribute for="SXRL" seen="0" colo="1"  />

            <Shape type="TUBE" rmax="SWCX_rOffset+SVTL_Radius+SWCX_dR" rmin="SWCX_rOffset+SVTL_Radius" dz="SWCX_Length/2.0"  />

            <Create block="SWRP"  />
            <Create block="SYRU"  />

            <Do var="i_phi" from="1" to="4*SVTL_Nladder"  >
                tube_angle=(pi/(2.0*SVTL_Nladder))*(i_phi-0.5) 

                <Placement y="sin(tube_angle)*(SVTL_radius+SWCX_rOffset+SWCX_dR/2.0)" x="cos(tube_angle)*(SVTL_radius+SWCX_rOffset+SWCX_dR/2.0)" z="0.0" block="SWRP"  >
                </Placement>
                

                <Placement y="sin(tube_angle)*(SVTL_radius+SWCX_rOffset+SWCX_dR/2.0)" x="cos(tube_angle)*(SVTL_radius+SWCX_rOffset+SWCX_dR/2.0)" z="0.0" block="SYRU"  >
                </Placement>
                

            </Do>
            

        </Block>
        
        <Block name="SWRP" comment="is an approximation of water in the circular pipe, a rectangular one"  >
            <Material name="Water"  />
            <Attribute for="SWRP" seen="1" colo="4"  />

            <Shape type="TUBE" rmax="SWCX_rad" rmin="0.0" dz="SWCX_Length/2.0"  />

        </Block>
        
        <Block name="SYRU" comment="is the wall of the water pipe"  >
            <Mixture name="CH2" dens="0.935"  >
                <Component name="C" a="12" z="6" w="1"  />
                <Component name="H2" a="1" z="1" w="2"  />
            </Mixture>
            

            <Attribute for="SYRU" seen="1" colo="4"  />
            <Shape type="TUBE" rmax="SWCX_rad+SWCX_wall" rmin="SWCX_rad" dz="SWCX_Length/2.0"  />


        </Block>
        


        <Block name="SOUM" comment="is the mother of the array of the outer shileding support tubes"  >
            <Material name="Air"  />
            <Attribute for="SOUM" seen="0" colo="1"  />
            <Shape type="TUBS" rmin="SOUP_Rout-SOUP_dR" rmax="SOUP_Rout" dz="SOUP_Length/2.0" phi2="SOUP_Phi2" phi1="SOUP_Phi1"  />

            <Create block="SOUR"  />
            <Do var="i_phi" from="1" to="4"  >
                <Placement y="sin(shield_phi(i_phi)*pi/180.0)*(SOUP_Rout-SOUP_dR/2.0)" x="cos(shield_phi(i_phi)*pi/180.0)*(SOUP_Rout-SOUP_dR/2.0)" z="0.0" block="SOUR"  >
                </Placement>
                
            </Do>
            


        </Block>
        
        <Block name="SOUR" comment="is the outer shileding support tubes (rods)"  >
            <Material name="Carbon"  />
            <Attribute for="SOUM" seen="1" colo="4"  />
            <Shape type="TUBE" rmax="SOUP_DiamOut/2.0" rmin="SOUP_DiamIn/2.0" dz="SOUP_Length/2.0"  />
        </Block>
        
        <Block name="SLYD" comment="is a single SVT layer"  >

            ladthk = swca_WaferThk/2+swca_RoHaThk+swca_WafCarTh 

            elethk=2.0*selc_BeThk+selc_WatThk+selc_BeOThk+selc_AgPdThk 
            elethk=elethk+selc_GlassThk+selc_DyeThk 
            deg=180.0/svtl_Nladder 
            rad=Pi/svtl_Nladder 

            <Material name="Air"  />
            <Attribute for="SLYD" seen="0" colo="1"  />


            rmin=svtl_radius-ladthk 
<!--        rmax=sqrt((svtl_radius)**2+(swca_WaferWid/2)**2)+elethk  -->
            rmax  = svtl_radius*svtl_radius
            rmax += swca_waferwid * swca_waferwid / 4.0
            rmax  = sqrt(rmax) + elethk

            rmax=min(rmax,radmax-ladthk) 
            <Shape type="TUBE" rmax="rmax" rmin="rmin" dz="swca_Length/2"  />

            <Create block="SLSD"  />
        </Block>
        
        <Block name="SLSD" comment="is a single ladder mother (sector of tube)"  >
            <Attribute for="SLSD" seen="0" colo="1"  />
            <If expr="svtg_Nlayer&lt;0"  >
                <Shape type="DIVISION" ndiv="1" c0="-90" iaxis="2"  />
                <Else  >
                    <If expr="svtg_version==1"  >
                        c0=-deg*mod(ilayer,2)+svtg_Angoff*int((ilayer-1)/2)  
                        <Else  >
                            c0=90-deg*mod(ilayer,2) 
                        </Else>
                        
                    </If>
                    
                    <Shape type="DIVISION" ndiv="svtl_Nladder" c0="c0" iaxis="2"  />
                </Else>
                
            </If>
            
            <Create block="SLDI"  />
            <Placement x="svtl_radius" block="SLDI"  >
                <Rotation ort="YZX"  />
            </Placement>
            
            <Create block="SELE"  />

            deg=180.0/svtl_Nladder 
            rad=(TwoPi/2)/svtl_Nladder 
            xpos=sin(rad)*selc_ElcaWid/2-cos(rad)*elethk/2 
            ypos=cos(rad)*selc_ElcaWid/2+sin(rad)*elethk/2 
            <Do var="s" from="-1" to="1" step="2"  >
                side=s 
                <Placement y="s*(swca_WaferWid/2+ypos)" x="svtl_radius-ladthk-xpos" block="SELE"  >
                    <Rotation ort="YZX"  />
                    <Rotation alphax="90*(1-s)"  />
                    <Rotation alphaz="s*deg"  />
                </Placement>
                
            </Do>
            
        </Block>
        
        <Block name="SLDI" comment="is a ladder volume"  >

            tabLen=swca_Length/2-7*(swca_WaferWid/2+swca_WaferGap) 
            <Material name="Air"  />
            <Attribute for="SLDI" seen="0" serial="svtl_Nwafer" colo="1"  />
            <Shape type="BOX" dz="ladthk" dx="swca_WaferWid/2" dy="swca_Length/2"  />
            <Create block="STLI"  />
            <Placement block="STLI"  >
            </Placement>
            
            <Create block="SBER"  />
            <Placement x="+swca_WaferWid/2-swca_WafCarWd/2" z="-ladthk+swca_WafCarTh/2" block="SBER"  >
            </Placement>
            
            <Placement x="-swca_WaferWid/2+swca_WafCarWd/2" z="-ladthk+swca_WafCarTh/2" block="SBER"  >
            </Placement>
            
            <Create block="STAB"  />
            <Placement y="swca_Length/2-tabLen/2" z="-ladthk+swca_WafCarTh/2" block="STAB"  >
            </Placement>
            
            <Placement y="-swca_Length/2+tabLen/2" z="-ladthk+swca_WafCarTh/2" block="STAB"  >
            </Placement>
            

            <Create block="STRU"  />
            <Placement y="(svtl_Nwafer*(swca_WaferLen/2+swca_WaferGap)+swca_WaferGap+swca_strutlen/2)" z="-ladthk+swca_WafCarTh/2" block="STRU"  >
            </Placement>
            
            <Placement y="-(svtl_Nwafer*(swca_WaferLen/2+swca_WaferGap)+swca_WaferGap+swca_strutlen/2)" z="-ladthk+swca_WafCarTh/2" block="STRU"  >
            </Placement>
            
            <Create block="SRHC"  />
            <Placement x="+swca_WaferWid/2-swca_WafCarWd/2" z="-ladthk+2.0*swca_WafCarTh/2+swca_RoHaThk/2" block="SRHC"  >
            </Placement>
            
            <Placement x="-swca_WaferWid/2+swca_WafCarWd/2" z="-ladthk+2.0*swca_WafCarTh/2+swca_RoHaThk/2" block="SRHC"  >
            </Placement>
            

            <Create block="SPCB"  />

            yPCB = SVTL_Nwafer*(swca_WaferLen+swca_WaferGap)/2.0 + SVTL_PcbGap + SVTL_PcbLen/2.0 

            <Placement y="yPCB" x="0.0" z="SVTL_PcbThk/2.0" block="SPCB"  >
            </Placement>
            
            <Placement y="-yPCB" x="0.0" z="SVTL_PcbThk/2.0" block="SPCB"  >
                <Rotation alphaz="180.0"  />
            </Placement>
            


        </Block>
        
        <Block name="SRHC" comment="is the roha cell wafer support"  >
            <Mixture name="ROHA" dens="0.0304"  >
                <Component name="C" a="12" z="6" w="1"  />
                <Component name="H2" a="1" z="1" w="2"  />
            </Mixture>
            
            <Attribute for="SRHC" seen="1" colo="3"  />
            <Shape type="BOX" dz="swca_RoHaThk/2" dx="swca_WafCarWd/2" dy="svtl_Nwafer*(swca_WaferLen/2+swca_WaferGap)"  />
        </Block>
        
        <Block name="STLI" comment="is the waver pack container"  >
            <Attribute for="STLI" seen="0" serial="0" colo="1"  />
            <Shape type="BOX" dz="swca_WaferThk/2" dy="svtl_Nwafer*(swca_WaferLen/2+swca_WaferGap)"  />
            <Create block="STSI"  />
        </Block>
        
        <Block name="STSI" comment="is a single waver container"  >
            <Shape type="DIVISION" ndiv="svtl_Nwafer" iaxis="2"  />
            <Create block="SVTD"  />
            <Placement block="SVTD"  >
            </Placement>
            
        </Block>
        
        <Block name="SVTD" comment="is an active wafer volume"  >
            <Material name="Silicon"  />
            <Material name="Sensitive" isvol="1"  />
            <Attribute for="SVTD" seen="1" colo="4"  />
            <Shape type="BOX" dy="swca_WaferLen/2"  />
            <Call expr="%Imed,'STRA',1." routine="GSTPAR"  />

            <Instrument block="SVTD"  >
                <Hit meas="z" opts="S" bins=".001"  />
                <Hit meas="y" bins=".001"  />
                <Hit meas="x" bins=".001"  />
                <Hit meas="ptot" nbits="18" min="0" max="100"  />
                <Hit meas="cx" nbits="10"  />
                <Hit meas="cy" nbits="10"  />
                <Hit meas="cz" nbits="10"  />
                <Hit meas="sleng" nbits="16" min="0" max="500"  />
                <Hit meas="tof" nbits="16" min="0" max="1.0E-6"  />
                <Hit meas="step" bins=".01"  />
                <Hit meas="eloss" nbits="22" min="0." max="0.01" />
            </Instrument>
            

        </Block>
        
        <Block name="SBER" comment="are the Berillium wafer carrier rails"  >
            <Material name="Berillium"  />
            <Attribute for="SBER" seen="1" colo="2"  />
            <Shape type="BOX" dz="swca_WafCarTh/2" dx="swca_WafCarWd/2" dy="swca_Length/2"  />
        </Block>
        
        <Block name="STAB" comment="are the Berillium wafer carrier end tabs"  >
            <Material name="Berillium"  />
            <Attribute for="STAB" seen="1" colo="2"  />
            <Shape type="BOX" dz="swca_WafCarTh/2" dx="swca_WaferWid/2-swca_WafCarWd" dy="tabLen/2"  />
        </Block>
        
        <Block name="STRU" comment="are the Berillium struts between the wafer carrier rails"  >
            <Material name="Berillium"  />
            <Attribute for="STRU" seen="1" colo="2"  />
            <Shape type="BOX" dz="swca_WafCarTh/2" dx="swca_WaferWid/2-swca_WafCarWd" dy="swca_strutlen/2"  />
        </Block>
        
        <Block name="SPCB" comment="is the G10 PCB"  >
            <Material name="G10"  />
            <Attribute for="SPCB" seen="1" colo="5"  />
            <Shape type="BOX" dz="SVTL_PcbThk/2.0" dx="SVTL_PcbWidth/2.0" dy="SVTL_PcbLen/2.0"  />
        </Block>
        
        <Block name="SCBM" comment="is the mother for the bundle of cables going from PCBs"  >
            <Material name="Air"  />
            <Attribute for="SCBM" seen="0" colo="1"  />
            <Shape type="TUBE" rmax="SWAM_Rmax" rmin="radii(1)" dz="SCBP_Len"  />


            <Do var="ilayer" from="1" to="4"  >
                <Use struct="SCBP" select="Layer" value="ilayer "  />
                <Create block="SCBL"  />
                <Placement y="0.0" x="0.0" z="0.0" block="SCBL"  >
                </Placement>
                
            </Do>
            

            <Do var="ilayer" from="1" to="3"  >
                <Use struct="SFEP" select="Layer" value="ilayer "  />
                <Create block="SFED"  />
                <Placement y="0.0" x="0.0" z="0.0" block="SFED"  >
                </Placement>
                

                <Create block="SPLS"  />
                <Placement y="0.0" x="0.0" z="0.0" block="SPLS"  >
                </Placement>
                
            </Do>
            


        </Block>
        
        <Block name="SCBL" comment="is the bundle of cables going from PCBs to manifolds"  >
            <Material name="Copper"  />
            <Attribute for="SCBL" seen="1" colo="3"  />

<!--
            sq=SCBP_Len**2/(SCBP_Rmin2-SCBP_Rmin1)**2 
            A=pi*(SCBP_Rmin1**2+SCBP_Rmin2**2)*sqrt(1+sq) 
  -->

            sq  = (scbp_len*scbp_len)
            sq /= (scbp_rmin2-scbp_rmin1)
            sq /= (scbp_rmin2-scbp_rmin1)
               
            A   = pi
            A  *= (scbp_rmin1*scbp_rmin1 + scbp_rmin2*scbp_rmin2)
            A  *= sqrt(1+sq)

            CuThk=(SCBP_Vol/A)*sqrt(1.0+1.0/sq) 

            <Shape type="CONE" rmn1="SCBP_Rmin1" rmn2="SCBP_Rmin2" rmx2="SCBP_Rmin2+CuThk" rmx1="SCBP_Rmin1+CuThk" dz="SCBP_Len"  />
        </Block>
        
        <Block name="SFED" comment="is the watrer in the bundle of pipes going to manifolds"  >
            <Material name="Water"  />
            <Attribute for="SFED" seen="1" colo="1"  />

<!--
            sq=SFEP_Len**2/(SFEP_Rmin2-SFEP_Rmin1)**2 
            A=pi*(SFEP_Rmin1**2+SFEP_Rmin2**2)*sqrt(1+sq) 
  -->

            sq  = sfep_len * sfep_len
            sq /= (sfep_rmin2 - sfep_rmin1)
            sq /= (sfep_rmin2 - sfep_rmin1)

            A   = pi
            A  *= (sfep_rmin1*sfep_rmin1 + sfep_rmin2+sfep_rmin2)
            A  *= sqrt(1+sq)

            CuThk=(SFEP_Vol/A)*sqrt(1.0+1.0/sq) 

            <Shape type="CONE" rmn1="SFEP_Rmin1" rmn2="SFEP_Rmin2" rmx2="SFEP_Rmin2+CuThk" rmx1="SFEP_Rmin1+CuThk" dz="SFEP_Len"  />
        </Block>
        
        <Block name="SPLS" comment="is the plastic walls of the bundle of pipes going to manifolds"  >
            <Mixture name="CH2" dens="0.935"  >
                <Component name="C" a="12" z="6" w="1"  />
                <Component name="H2" a="1" z="1" w="2"  />
            </Mixture>
            
            <Attribute for="SPLS" seen="1" colo="6"  />

<!--
            sq=SFEP_Len**2/(SFEP_Rmin2-SFEP_Rmin1)**2 
            A=pi*(SFEP_Rmin1**2+SFEP_Rmin2**2)*sqrt(1+sq) 
  -->
            sq  = sfep_len * sfep_len
            sq /= (sfep_rmin2 - sfep_rmin1)
            sq /= (sfep_rmin2 - sfep_rmin1)

            A   = pi
            A  *= (sfep_rmin1*sfep_rmin1 + sfep_rmin2+sfep_rmin2)
            A  *= sqrt(1+sq)

            CuThk=(SFEP_Vol/A)*sqrt(1.0+1.0/sq) 

            <Shape type="CONE" rmn1="SFEP_Rmin1+0.2" rmn2="SFEP_Rmin2+0.2" rmx2="SFEP_Rmin2+0.2+CuThk" rmx1="SFEP_Rmin1+0.2+CuThk" dz="SFEP_Len"  />
        </Block>
        
        <Block name="SELE" comment="is the electronics mother volume"  >
            <Material name="Air"  />
            <Attribute for="SELE" seen="0" colo="1"  />
            <Shape type="BOX" dz="elethk/2" dx="selc_ElcaWid/2" dy="swca_Length/2"  />
            <Create block="SWCH"  />
            <Placement z="-elethk/2+selc_BeThk/2" block="SWCH"  >
            </Placement>
            
            <Placement z="-elethk/2+selc_BeThk+selc_WatThk+selc_BeThk/2" block="SWCH"  >
            </Placement>
            
            <Create block="SWCS"  />
            <Placement x="-selc_ElcaWid/2+selc_BeThk/2" z="-elethk/2+selc_BeThk+selc_WatThk/2" block="SWCS"  >
            </Placement>
            
            <Placement x="+selc_ElcaWid/2-selc_BeThk/2" z="-elethk/2+selc_BeThk+selc_WatThk/2" block="SWCS"  >
            </Placement>
            
            <Create block="SWCW"  />
            <Placement z="-elethk/2+selc_BeThk+selc_WatThk/2" block="SWCW"  >
            </Placement>
            
            <Create block="SBOI"  />
            <Placement z="(elethk/2-selc_DyeThk-selc_AgPdThk-selc_GlassThk-selc_BeOThk/2)" block="SBOI"  >
            </Placement>
            
            <Create block="SGLA"  />
            <Placement z="elethk/2-selc_DyeThk-selc_AgPdThk-selc_GlassThk/2" block="SGLA"  >
            </Placement>
            
            <Create block="SAGP"  />
            <Placement z="elethk/2-selc_DyeThk-selc_AgPdThk/2" block="SAGP"  >
            </Placement>
            
            <Create block="SDYE"  />
            <Placement x="selc_ElcaWid/2-selc_Dyespc-selc_Dyewid/2" z="elethk/2-selc_DyeThk/2" block="SDYE"  >
            </Placement>
            
            <Placement x="selc_ElcaWid/2-2.0*selc_Dyespc-3.0*selc_Dyewid/2" z="elethk/2-selc_DyeThk/2" block="SDYE"  >
            </Placement>
            
            <Create block="SECA"  />
            <Placement x="-selc_ElcaWid/2+selc_CabWid/2" z="elethk/2-selc_DyeThk+selc_CabThk/2" block="SECA"  >
            </Placement>
            
        </Block>
        
        <Block name="SDYE" comment="is the ic chip on the hybrid"  >
            <Material name="Silicon"  />
            <Attribute for="SDYE" seen="1" colo="6"  />
            <Shape type="BOX" dz="selc_DyeThk/2" dx="selc_DyeWid/2" dy="svtl_Nwafer*(swca_WaferLen/2+swca_WaferGap)"  />
        </Block>
        
        <Block name="SECA" comment="is the cable on the electronics carrier"  >
            <Material name="Copper"  />
            <Attribute for="SECA" seen="1" colo="2"  />
            <Shape type="BOX" dz="selc_CabThk/2" dx="selc_CabWid/2" dy="swca_Length/2"  />
        </Block>
        
        <Block name="SBOI" comment="is the Berillia layer"  >
            <Mixture name="BeO" dens="2.85"  >
                <Component name="Be" a="9" z="4" w="1"  />
                <Component name="O" a="16" z="8" w="1"  />
            </Mixture>
            
            <Attribute for="SBOI" seen="1" colo="6"  />
            <Shape type="BOX" dz="selc_BeOThk/2" dx="selc_ElcaWid/2" dy="svtl_Nwafer*(swca_WaferLen/2+swca_WaferGap)"  />
        </Block>
        
        <Block name="SAGP" comment="is the Silver-Palladium layer"  >
            <Mixture name="AgPd" dens="11.25"  >
                <Component name="Ag" a="108" z="47" w="1"  />
                <Component name="Pd" a="106" z="46" w="1"  />
            </Mixture>
            
            <Attribute for="SAGP" seen="1" colo="2"  />
            <Shape type="BOX" dz="selc_AgPdThk/2" dx="selc_ElcaWid/2" dy="svtl_Nwafer*(swca_WaferLen/2+swca_WaferGap)"  />
        </Block>
        
        <Block name="SGLA" comment="is the insulating glass layer"  >
            <Mixture name="glass" dens="2.2"  >
                <Component name="Si" a="28" z="14" w="1"  />
                <Component name="O" a="16" z="8" w="2"  />
            </Mixture>
            
            <Attribute for="SGLA" seen="1" colo="6"  />
            <Shape type="BOX" dz="selc_GlassThk/2" dx="selc_ElcaWid/2" dy="svtl_Nwafer*(swca_WaferLen/2+swca_WaferGap)"  />
        </Block>
        
        <Block name="SWCH" comment="is the Be top and bottom of the water channel"  >
            <Material name="Berillium"  />
            <Attribute for="SWCH" seen="1" colo="2"  />
            <Shape type="BOX" dz="selc_BeThk/2" dx="selc_ElcaWid/2" dy="swca_Length/2"  />
        </Block>
        
        <Block name="SWCS" comment="is the Be side of the water channel"  >
            <Material name="Berillium"  />
            <Attribute for="SWCS" seen="1" colo="2"  />
            <Shape type="BOX" dz="selc_WatThk/2" dx="selc_BeThk/2" dy="swca_Length/2"  />
        </Block>
        
        <Block name="SWCW" comment="is the water channel water (probably Evian?)"  >
            <Material name="Water"  />
            <Attribute for="SWCW" seen="1" colo="6"  />
            <Shape type="BOX" dz="(selc_WatThk/2)" dx="(selc_ElcaWid-2.0*selc_BeThk)/2" dy="swca_Length/2"  />
        </Block>
        
        <Block name="SIRT" comment="is the SVT inner end ring tube"  >
            <Material name="Berillium"  />
            <Attribute for="SIRT" seen="1" colo="2"  />
<!--        ir_rmin=serg_IrngPrMn*(cos(pi/8.)+sqrt(tan(pi/8.)**2.-sin(pi/8.)**2.))  -->
            ir_rmin  = cos(pi/8.0)
            ir_rmin += sqrt( tan(pi/8.0)*tan(pi/8.0) - sin(pi/8.0)*sin(pi/8.0) )
            ir_rmin *= serg_irngprmn
            <Shape type="TUBE" rmax="serg_IrngTrMx" rmin="ir_rmin" dz="serg_EndRngTh/2"  />
        </Block>
        
        <Block name="SIRP" comment="is the SVT inner end ring polycone (overlaps tube)"  >
            <Material name="Berillium"  />
            <Attribute for="SIRP" seen="1" colo="2"  />
<!--        rou=serg_IrngTrMx/(cos(pi/8.)+sqrt(tan(pi/8.)**2.-sin(pi/8.)**2.))  -->
            rou  = cos(pi/8.0)
            rou += sqrt( tan(pi/8.0)*tan(pi/8.0) - sin(pi/8.0)*sin(pi/8.0) )
            rou  = serg_irngtrmx / rou
            <Shape type="PGON" phi1="0" rmn="{serg_IrngPrMn,serg_IrngPrMn}" rmx="{rou,rou}" nz="2" npdiv="8" dphi="360" zi="{-serg_EndRngTh/2,+serg_EndRngTh/2}"  />
        </Block>
        
        <Block name="SOER" comment="is the SVT outer end ring"  >
            <Material name="Berillium"  />
            <Attribute for="SOER" seen="1" colo="2"  />
            <Shape type="TUBE" rmax="serg_OrngRmax" rmin="serg_OrngRmin" dz="serg_EndRngTh/2"  />
        </Block>
        
        <Block name="SIES" comment="is the volume to hold inner endring screws"  >
            <Material name="Air"  />
            <Attribute for="SIES" seen="0" colo="1"  />
            <Shape type="TUBE" rmax="serg_IrngTrMx" rmin="ir_rmin" dz="0.5*(brack_z-endrng_z)"  />
            <Create block="SISM"  />
        </Block>
        
        <Block name="SISM" comment="is the mother volume division for the inner end ring screws"  >
            <Attribute for="SISM" seen="0" colo="1"  />
            <Shape type="DIVISION" ndiv="4" c0="45" iaxis="2"  />
            <Create block="SCRW"  />
            <Placement x="ssup_ERJrad-ssup_ERJlen/2+ssup_ERJ1x" block="SCRW"  >
            </Placement>
            
        </Block>
        
        <Block name="SOES" comment="is the volume to hold outer endring screws"  >
            <Material name="Air"  />
            <Attribute for="SOES" seen="0" colo="1"  />
            <Shape type="TUBE" rmax="serg_OrngRmax" rmin="serg_OrngRmin" dz="0.5*(brack_z-endrng_z)"  />
            <Create block="SOSM"  />
        </Block>
        
        <Block name="SOSM" comment="is the mother volume division for the outer end ring screws"  >
            <Attribute for="SOSM" seen="0" colo="1"  />
            <Shape type="DIVISION" ndiv="4" c0="45" iaxis="2"  />
            <Create block="SCRW"  />
            <Placement x="ssup_ERJrad+ssup_ERJlen/2-ssup_ERJ1x" block="SCRW"  >
            </Placement>
            
            <Placement x="ssup_ERJrad+ssup_ERJlen/2-ssup_ERJ2x" block="SCRW"  >
            </Placement>
            
            <Placement y="ssup_ERJ2y" x="ssup_ERJrad+ssup_ERJlen/2-ssup_ERJ2x" block="SCRW"  >
            </Placement>
            
            <Placement y="-ssup_ERJ2y" x="ssup_ERJrad+ssup_ERJlen/2-ssup_ERJ2x" block="SCRW"  >
            </Placement>
            
        </Block>
        
        <Block name="SBRG" comment="is the bracket joining the end rings"  >
            rin=serg_IrngPrMn 
            rou=serg_OrngRmax 
            <Material name="Air"  />
            <Attribute for="SBRG" seen="0" colo="1"  />
            <Shape type="TUBE" rmax="rou" rmin="rin" dz="ssup_ERJthk/2"  />
            <Create block="SBRM"  />
        </Block>
        
        <Block name="SBRM" comment="is a the mother of a single bracket joining the end rings"  >
            <Attribute for="SBRM" seen="0" colo="1"  />
            <Shape type="DIVISION" ndiv="4" c0="45" iaxis="2"  />
            <Create block="SBRI"  />
            <Placement x="ssup_ERJrad" block="SBRI"  >
            </Placement>
            
        </Block>
        
        <Block name="SBRI" comment="is the bracket which joins the rings"  >
            <Attribute for="SBRI" seen="1" colo="2"  />
            <Material name="Berillium"  />
            <Shape type="BOX" dz="ssup_ERJThk/2" dx="ssup_ERJlen/2" dy="ssup_ERJwid/2"  />
        </Block>
        
        <Block name="SROD" comment="is the SVT Carbon composite support rod"  >
            <Material name="Carbon"  />
            <Attribute for="SROD" seen="1" colo="2"  />
            <Shape type="TUBE" rmax="ssup_RodOD/2" rmin="ssup_RodID/2" dz="ssup_RodLen/2"  />
        </Block>
        
        <Block name="SCON" comment="is the Silicon tracker supporting cone mother volume"  >
            cone_thk1=ssup_GrphThk 
            cone_thk2=cone_thk1+ssup_CabThk+2*ssup_HosRmx 
            cone_thk2=cone_thk2+ssup_WrpMyThk+ssup_WrpAlThk 
            <Material name="Air"  />
            <Attribute for="SCON" seen="0" colo="1"  />
            <Shape type="PCON" zi="{ssup_Cone1zmn,ssup_Rodlen/2,ssup_Rodlen/2,ssup_Rodlen/2+ssup_GrphThk,ssup_Rodlen/2+ssup_GrphThk,ssup_Cone3zmx,ssup_Cone4zmx}" rmn="{ssup_Con1IdMn,ssup_Con1IdMn,ssup_Con1IdMn,ssup_Con1IdMn,ssup_Con3IdMn,ssup_Con4IdMn,ssup_Con4IdMx}" rmx="{ssup_Con1IdMn+cone_thk1,ssup_Con1IdMn+cone_thk1,ssup_Con3IdMn+cone_thk1,ssup_Con3IdMn+cone_thk1,ssup_Con3IdMn+cone_thk2,ssup_Con4IdMn+cone_thk2,ssup_Con4IdMx+cone_thk2}" nz="7" phi1="0" dphi="360"  />
            <Create block="SGRA"  />
            <Placement block="SGRA"  >
            </Placement>
            
            <Create block="STAP"  />
            <Placement block="STAP"  >
            </Placement>
            
            <Create block="STAC"  />
            <Placement block="STAC"  >
            </Placement>
            
            <Create block="SHLA"  />
            <Placement z="ssup_Rodlen/2+ssup_GrphThk+0.5*(ssup_Cone3zmx-ssup_Rodlen/2-ssup_GrphThk)" block="SHLA"  >
            </Placement>
            
            <Create block="SHLB"  />
            <Placement z="ssup_Cone3zmx+0.5*(ssup_Cone4zmx-ssup_Cone3zmx)" block="SHLB"  >
            </Placement>
            
            <Create block="SCMY"  />
            <Placement block="SCMY"  >
            </Placement>
            
            <Create block="SCAL"  />
            <Placement block="SCAL"  >
            </Placement>
            
        </Block>
        
        <Block name="SGRA" comment="is the graphite/epoxy support cone"  >
            <Material name="Carbon"  />
            <Attribute for="SGRA" seen="1" colo="6"  />
            <Shape type="PCON" zi="{ssup_Rodlen/2,ssup_Rodlen/2+ssup_GrphThk,ssup_Rodlen/2+ssup_GrphThk,ssup_Cone3zmx,ssup_Cone4zmx}" rmn="{ssup_Con1IdMn,ssup_Con1IdMn,ssup_Con3IdMn,ssup_Con4IdMn,ssup_Con4IdMx}" rmx="{ssup_Con3IdMn+ssup_GrphThk,ssup_Con3IdMn+ssup_GrphThk,ssup_Con3IdMn+ssup_GrphThk,ssup_Con4IdMn+ssup_GrphThk,ssup_Con4IdMx+ssup_GrphThk}" nz="5" phi1="0" dphi="360"  />
        </Block>
        
        <Block name="STAP" comment="is the plastic part of the twin-ax cable layer (guess polyethylene)"  >
            roffset=ssup_GrphThk 
            <Mixture name="CH2" dens="0.935"  >
                <Component name="C" a="12" z="6" w="1"  />
                <Component name="H2" a="1" z="1" w="2"  />
            </Mixture>
            
            <Attribute for="STAP" seen="1" colo="3"  />
            <Shape type="PCON" zi="{ssup_Rodlen/2+ssup_GrphThk,ssup_Cone3zmx,ssup_Cone4zmx}" rmn="{ssup_Con3IdMn+roffset,ssup_Con4IdMn+roffset,ssup_Con4IdMx+roffset}" rmx="{ssup_Con3IdMn+roffset+ssup_CabThk/2,ssup_Con4IdMn+roffset+ssup_CabThk/2,ssup_Con4IdMx+roffset+ssup_CabThk/2}" nz="3" phi1="0" dphi="360"  />
        </Block>
        
        <Block name="STAC" comment="is the copper part of the twin-ax cable layer"  >
            roffset=ssup_GrphThk+ssup_CabThk/2 
            <Material name="Copper"  />
            <Attribute for="STAC" seen="1" colo="2"  />
            <Shape type="PCON" zi="{ssup_Rodlen/2+ssup_GrphThk,ssup_Cone3zmx,ssup_Cone4zmx}" rmn="{ssup_Con3IdMn+roffset,ssup_Con4IdMn+roffset,ssup_Con4IdMx+roffset}" rmx="{ssup_Con3IdMn+roffset+ssup_CabThk/2,ssup_Con4IdMn+roffset+ssup_CabThk/2,ssup_Con4IdMx+roffset+ssup_CabThk/2}" nz="3" phi1="0" dphi="360"  />
        </Block>
        
        <Block name="SHLA" comment="is the water hose layer for cone 3 (closer to vertex)"  >
            roffset=ssup_GrphThk+ssup_CabThk 
            <Material name="Air"  />
            <Attribute for="SHLA" seen="0" colo="1"  />
            <Shape type="CONE" rmn1="ssup_Con3IdMn+roffset" rmn2="ssup_Con4IdMn+roffset" rmx2="ssup_Con4IdMn+roffset+2.0*ssup_HosRmx" rmx1="ssup_Con3IdMn+roffset+2.0*ssup_HosRmx" dz=".5*(ssup_Cone3zmx-ssup_Rodlen/2-ssup_GrphThk)"  />
            <Create block="SHMA"  />
        </Block>
        
        <Block name="SHMA" comment="is a single mother volume for a water hose on the cone 3"  >
            roffset=ssup_GrphThk+ssup_CabThk 
            rmin=ssup_Con3IdMn+roffset 
            rmax=ssup_Con4IdMn+roffset 
            zmin=ssup_Rodlen/2+ssup_GrphThk 
            zmax=ssup_Cone3zmx 
<!--        cone_len=sqrt((zmax-zmin)**2.+(rmax-rmin)**2.)   -->
            cone_len  = (zmax-zmin)*(zmax-zmin)
            cone_len += (rmax-rmin)*(rmax-rmin)
            cone_len  = sqrt(cone_len)

            cone_sin=(rmax-rmin)/cone_len 
            cone_cos=(zmax-zmin)/cone_len 
            angle=asin(cone_sin)*180/pi 
            xpos=rmin+0.5*(rmax-rmin)+ssup_HosRmx*cone_cos 
            zpos=-ssup_HosRmx*cone_sin 
            <Attribute for="SHMA" seen="0" colo="1"  />
            <Shape type="DIVISION" ndiv="ssup_Nhoses" c0="0.0" iaxis="2"  />
            <Create block="SWHO"  />
            <Placement y="0" x="xpos" z="zpos" block="SWHO"  >
                <Rotation alphay="angle"  />
            </Placement>
            

        </Block>
        
        <Block name="SHLB" comment="is the water hose layer cone 4 (further from vertex)"  >
            roffset=ssup_GrphThk+ssup_CabThk 
            <Material name="Air"  />
            <Attribute for="SHLB" seen="0" colo="1"  />
            <Shape type="CONE" rmn1="ssup_Con4IdMn+roffset" rmn2="ssup_Con4IdMx+roffset" rmx2="ssup_Con4IdMx+roffset+2.0*ssup_HosRmx" rmx1="ssup_Con4IdMn+roffset+2.0*ssup_HosRmx" dz=".5*(ssup_Cone4zmx-ssup_Cone3zmx)"  />
            <Create block="SHMB"  />
        </Block>
        
        <Block name="SHMB" comment="is a single mother volume for a water hose on the cone 4"  >

            roffset=ssup_GrphThk+ssup_CabThk 
            rmin=ssup_Con4IdMn+roffset 
            rmax=ssup_Con4IdMx+roffset 

            zmin=ssup_Cone3zmx 
            zmax=ssup_Cone4zmx 

<!--        cone_len=sqrt((zmax-zmin)**2.+(rmax-rmin)**2.)  -->
            cone_len  = (zmax-zmin)*(zmax-zmin)
            cone_len += (rmax-rmin)*(rmax-rmin)
            cone_len  = sqrt(cone_len)

            cone_sin=(rmax-rmin)/cone_len 
            cone_cos=(zmax-zmin)/cone_len 

            angle=asin(cone_sin)*180/pi 

            xpos=rmin+0.5*(rmax-rmin)+ssup_HosRmx*cone_cos 
            zpos=-ssup_HosRmx*cone_sin 
            <Attribute for="SHMB" seen="0" colo="1"  />
            <Shape type="DIVISION" ndiv="ssup_Nhoses" c0="0.0" iaxis="2"  />
            <Create block="SWHO"  />
            <Placement y="0" x="xpos" z="zpos" block="SWHO"  >
                <Rotation alphay="angle"  />
            </Placement>
            
        </Block>
        
        <Block name="SWHO" comment="is a water hose"  >
            <Attribute for="SWHO" seen="1" colo="3"  />
            <Mixture name="CH2" dens="0.935"  >
                <Component name="C" a="12" z="6" w="1"  />
                <Component name="H2" a="1" z="1" w="2"  />
            </Mixture>
            
            <Attribute for="SWHO" seen="1" colo="3"  />
            <Shape type="TUBE" rmax="ssup_HosRmx" rmin="0" dz="0.5*cone_len"  />
            <Create block="SHWA"  />
            <Placement block="SHWA"  >
            </Placement>
            
        </Block>
        
        <Block name="SHWA" comment="is the water in the hose"  >
            <Attribute for="SHWA" seen="1" colo="6"  />
            <Material name="Water"  />
            <Shape type="TUBE" rmax="ssup_HosRmn"  />

        </Block>
        
        <Block name="SCMY" comment="is a mylar wrap around the support cone"  >
            roffset=ssup_GrphThk+ssup_CabThk+2.0*ssup_HosRmx 
            <Mixture name="Mylar" dens="1.39"  >
                <Component name="C5" a="12" z="6" w="5"  />
                <Component name="H4" a="1" z="1" w="4"  />
                <Component name="O2" a="16" z="8" w="2"  />
            </Mixture>
            
            <Attribute for="SCMY" seen="1" colo="3"  />
            <Shape type="PCON" zi="{ssup_Rodlen/2+ssup_GrphThk,ssup_Cone3zmx,ssup_Cone4zmx}" rmn="{ssup_Con3IdMn+roffset,ssup_Con4IdMn+roffset,ssup_Con4IdMx+roffset}" rmx="{ssup_Con3IdMn+roffset+ssup_WrpMyThk,ssup_Con4IdMn+roffset+ssup_WrpMyThk,ssup_Con4IdMx+roffset+ssup_WrpMyThk}" nz="3" phi1="0" dphi="360"  />
        </Block>
        
        <Block name="SCAL" comment="is the aluminization on the mylar wrap around the support cone"  >
            roffset=ssup_GrphThk+ssup_CabThk+2.0*ssup_HosRmx+ssup_WrpMyThk 
            <Material name="Aluminium"  />
            <Attribute for="SCAL" seen="1" colo="2"  />
            <Shape type="PCON" zi="{ssup_Rodlen/2+ssup_GrphThk,ssup_Cone3zmx,ssup_Cone4zmx}" rmn="{ssup_Con3IdMn+roffset,ssup_Con4IdMn+roffset,ssup_Con4IdMx+roffset}" rmx="{ssup_Con3IdMn+roffset+ssup_WrpAlThk,ssup_Con4IdMn+roffset+ssup_WrpAlThk,ssup_Con4IdMx+roffset+ssup_WrpAlThk}" nz="3" phi1="0" dphi="360"  />
        </Block>
        
        <Block name="SWMM" comment="is the water manifold mother"  >
            rin=swam_Rmin-swam_TbrdThk 
            rou=swam_Rmax+swam_TbrdThk 
            <Material name="Air"  />
            <Attribute for="SWMM" seen="0" colo="1"  />

            <Shape type="PGON" phi1="0" rmn="{rin,rin}" rmx="{rou,rou}" nz="2" npdiv="18" dphi="360" zi="{-swam_Len/2,+swam_Len/2}"  />
            <Create block="SWMB"  />
            <Placement block="SWMB"  >
            </Placement>
            
            <Create block="SWMT"  />
            <Placement block="SWMT"  >
            </Placement>
            
            <Create block="SWMS"  />
            <Placement z="-swam_Len/2+swam_WallThk/2" block="SWMS"  >
            </Placement>
            
            <Placement z="swam_Len/2-swam_WallThk/2" block="SWMS"  >
            </Placement>
            
            <Create block="SWMW"  />
            <Placement block="SWMW"  >
            </Placement>
            
            <Create block="SOTB"  />
            <Placement block="SOTB"  >
            </Placement>
            
            <Create block="SITB"  />
            <Placement block="SITB"  >
            </Placement>
            
        </Block>
        
        <Block name="SWMB" comment="is the water manifold bottom piece (small r)"  >
            <Material name="Aluminium"  />
            <Attribute for="SWMB" seen="1" colo="2"  />
            <Shape type="PGON" phi1="0" rmn="{swam_Rmin,swam_Rmin}" rmx="{swam_Rmin+swam_WallThk,swam_Rmin+swam_WallThk}" nz="2" npdiv="18" dphi="360" zi="{-swam_Len/2+swam_WallThk,swam_Len/2-swam_WallThk}"  />
        </Block>
        
        <Block name="SWMT" comment="is the water manifold top piece (big r)"  >
            <Material name="Aluminium"  />
            <Attribute for="SWMT" seen="1" colo="2"  />
            <Shape type="PGON" phi1="0" rmn="{swam_Rmax-swam_WallThk,swam_Rmax-swam_WallThk}" rmx="{swam_Rmax,swam_Rmax}" nz="2" npdiv="18" dphi="360" zi="{-swam_Len/2+swam_WallThk,swam_Len/2-swam_WallThk}"  />
        </Block>
        
        <Block name="SWMS" comment="is the water manifold side pieces"  >
            <Material name="Aluminium"  />
            <Attribute for="SWMS" seen="1" colo="2"  />
            <Shape type="PGON" phi1="0" rmn="{swam_Rmin,swam_Rmin}" rmx="{swam_Rmax,swam_Rmax}" nz="2" npdiv="18" dphi="360" zi="{-swam_WallThk/2,swam_WallThk/2}"  />
        </Block>
        
        <Block name="SWMW" comment="is the water in the water manifold"  >
            <Attribute for="SWMW" seen="1" colo="6"  />
            <Material name="Water"  />
            <Shape type="PGON" phi1="0" rmn="{swam_Rmin+swam_WallThk,swam_Rmin+swam_WallThk}" rmx="{swam_Rmax-swam_WallThk,swam_Rmax-swam_WallThk}" nz="2" npdiv="18" dphi="360" zi="{-swam_Len/2+swam_WallThk,swam_Len/2-swam_WallThk}"  />
        </Block>
        
        <Block name="SOTB" comment="is the outer transition board (large r)"  >
            <Material name="G10"  />
            <Attribute for="SOTB" seen="1" colo="3"  />
            <Shape type="PGON" phi1="0" rmn="{swam_Rmax,swam_Rmax}" rmx="{swam_Rmax+swam_TbrdThk,swam_Rmax+swam_TbrdThk}" nz="2" npdiv="18" dphi="360" zi="{-swam_Len/2,+swam_Len/2}"  />
        </Block>
        
        <Block name="SITB" comment="is the inner transition board (small r)"  >
            <Mixture name="CH2" dens="0.935"  >
                <Component name="C" a="12" z="6" w="1"  />
                <Component name="H2" a="1" z="1" w="2"  />
            </Mixture>
            
            <Attribute for="SITB" seen="1" colo="3"  />
            <Shape type="PGON" phi1="0" rmn="{swam_Rmin-swam_TbrdThk,swam_Rmin-swam_TbrdThk}" rmx="{swam_Rmin,swam_Rmin}" nz="2" npdiv="18" dphi="360" zi="{-swam_Len/2,+swam_Len/2}"  />
        </Block>
        
        <Block name="SBWC" comment="is the bracket connecting the water manifold to the cone"  >
            rin=swam_Rmin 
            rou=ssup_Con1IdMn 
            <Material name="Air"  />
            <Attribute for="SBWC" seen="0" colo="1"  />
            <Shape type="TUBE" rmax="rou" rmin="rin" dz="(ssup_Cone1zmn-(swam_Zmin+swam_Len))/2"  />
            <Create block="SWCM"  />
        </Block>
        
        <Block name="SWCM" comment="is a single bracket mother between mani and cone"  >
            <Attribute for="SWCM" seen="0" colo="1"  />
            <Shape type="DIVISION" ndiv="3" c0="0" iaxis="2"  />
            <Create block="SXAI"  />
            <Placement z="(-(ssup_Cone1zmn-(swam_Zmin+swam_Len))/2+ssup_BraThk/2)" block="SXAI"  >
            </Placement>
            
            <Create block="SXBI"  />
            <Placement z="(ssup_BraThk/2)" block="SXBI"  >
            </Placement>
            
        </Block>
        
        <Block name="SXAI" comment="is a first piece (A) of the bracket between mani and cone (X)"  >
            <Attribute for="SXAI" seen="1" colo="2"  />
            <Material name="Aluminium"  />
            <Shape type="TUBS" rmin="swam_Rmin" rmax="ssup_Con1IdMn" dz="ssup_BraThk/2" phi2="5" phi1="-5"  />
        </Block>
        
        <Block name="SXBI" comment="is a second piece (B) of the bracket between mani and cone (X)"  >
            <Attribute for="SXBI" seen="1" colo="2"  />
            <Material name="Aluminium"  />
            <Shape type="TUBS" rmin="ssup_Con1IdMn-ssup_BraThk" rmax="ssup_Con1IdMn" dz="((ssup_Cone1zmn-(swam_Zmin+swam_Len)-ssup_BraThk)/2)" phi2="5" phi1="-5"  />
        </Block>
        
        <Block name="SCRW" comment="is the screw which attaches the end ring to the end ring bracket"  >
            <Material name="Berillium"  />
            <Attribute for="SCRW" seen="1" colo="2"  />
            <Shape type="TUBE" rmax="ssup_ERJdia/2" rmin="0" dz="0.5*(brack_z-endrng_z)"  />
        </Block>
        
        <Block name="SBSP" comment="is the beampipe support mother volume"  >
            <Material name="Air"  />
            <Attribute for="SBSP" seen="0" colo="1"  />
            <Shape type="TUBE" rmax="ssub_KMountOd/2" rmin="svtg_RSizeMin" dz="ssub_KMntThk/2+ssub_MBlkHgh"  />
            <Create block="SAKM"  />
            <Placement block="SAKM"  >
            </Placement>
            
            <Create block="SBMM"  />


            <Create block="SBMM"  />
            <Create block="SBRL"  />
            <Create block="SBRX"  />

            <Do var="i" from="-1" to="1" step="2"  >
                <Do var="j" from="0" to="1"  >
                    phi=i*ssub_SRCutPhi+180*j 

                    xbuf1=(ssub_KMountOD/4.0+(svtg_RSizeMin+ssub_SRollOd)/2.0) 
                    <Placement y="-xbuf1*cos(degrad*Phi)" x="xbuf1*sin(degrad*Phi)" z="-ssub_KMntThk/2-ssub_MBlkHgh/2" block="SBMM"  >
                        <Rotation alphaz="Phi"  />
                    </Placement>
                    

                    xbuf2=svtg_RSizeMin+ssub_SRollOd/2 
                    <Placement y="-xbuf2*cos(degrad*Phi)" x="xbuf2*sin(degrad*Phi)" z="ssub_SRingThk/2+ssub_SRollId/2" block="SBRL"  >
                        <Rotation alphaz="phi-90"  />
                        <Rotation ort="ZXY"  />
                    </Placement>
                    

                    <Placement y="-xbuf2*cos(degrad*Phi)" x="xbuf2*sin(degrad*Phi)" z="ssub_SRingThk/2+ssub_SRollId/2" block="SBRX"  >
                        <Rotation alphaz="phi-90"  />
                        <Rotation ort="ZXY"  />
                    </Placement>
                    
                </Do>
                
            </Do>
            

            <Create block="SBSR"  />
            <Placement block="SBSR"  >
            </Placement>
            
        </Block>
        
        <Block name="SAKM" comment="is the beampipe support aluminum kinematic mount"  >
            <Material name="Aluminium"  />
            <Attribute for="SAKM" seen="1" colo="2"  />
            <Shape type="TUBE" rmax="ssub_KMountOd/2" rmin="ssub_KMountId/2" dz="ssub_KMntThk/2"  />
            <Create block="SCKM"  />
            <Placement y="ssub_KMCutOff" konly="'MANY'" block="SCKM"  >
            </Placement>
            
            <Placement y="-ssub_KMCutOff" konly="'MANY'" block="SCKM"  >
                <Rotation alphaz="180"  />
            </Placement>
            
        </Block>
        
        <Block name="SCKM" comment="is the cutout in the aluminum kinematic mount"  >
            <Material name="Air"  />
            <Attribute for="SCKM" seen="1" colo="1"  />
            <Shape type="TUBS" rmin="ssub_KMCutId/2" rmax="ssub_KMCutOd/2" dz="ssub_KMntThk/2" phi2="270+ssub_KMCutOA" phi1="270-ssub_KMCutOA"  />
        </Block>
        
        <Block name="SBSR" comment="is the beampipe support G10 ring"  >

            <Material name="G10"  />
            <Attribute for="SBSR" seen="1" colo="3"  />
            <Shape type="TUBE" rmax="ssub_SRingOd/2" rmin="ssub_SRingId/2" dz="ssub_SRingThk/2"  />
            <Create block="SBCR"  />

            xbuf=ssub_SRCutIn+(ssub_SRCutOut-ssub_SRCutIn)/2 
            <Do var="i" from="-1" to="1" step="2"  >
                <Do var="j" from="0" to="1"  >
                    phi=i*ssub_SRCutPhi+180*j 
                    <Placement y="-xbuf*cos(degrad*phi)" x="xbuf*sin(degrad*phi)" konly="'MANY'" block="SBCR"  >
                        <Rotation alphaz="phi"  />
                    </Placement>
                    
                </Do>
                
            </Do>
            

        </Block>
        
        <Block name="SBCR" comment="is the cutout in the beampipe support G10 ring"  >
            <Material name="Air"  />
            <Attribute for="SBCR" seen="1" colo="1"  />
            <Shape type="BOX" dz="ssub_SRingThk/2" dx="ssub_SRCutWid/2" dy="(ssub_SRCutOut-ssub_SRCutIn)/2"  />
        </Block>
        
        <Block name="SBRL" comment="is the ceramic roller supporting the beampipe"  >
            <Material a="20.719" name="PYREX" dens="2.23" radl="12.6" absl="50.7" z="10.307"  />
            <Attribute for="SBRL" seen="1" colo="6"  />
            <Shape type="TUBE" rmax="ssub_SRollOd/2" rmin="ssub_SRollId/2" dy="ssub_SRollLen/2"  />
        </Block>
        
        <Block name="SBRX" comment="is the stainless steel roller axis"  >
            <Material name="Iron"  />
            <Attribute for="SBRX" seen="1" colo="2"  />
            <Shape type="TUBE" rmax="ssub_SRollId/2" rmin="0.0" dz="ssub_SWireLen/2"  />
        </Block>
        
        <Block name="SBMM" comment="is the beampipe support mounting mother volume"  >
            <Material name="Air"  />
            <Attribute for="SBMM" seen="0" colo="1"  />
            <Shape type="BOX" dz="ssub_MBlkHgh/2" dx="ssub_MBlkIWid/2" dy="(ssub_KMountOD/2-svtg_RSizeMin-ssub_SRollOd)/2"  />
            <Create block="SMRD"  />
            xbuf=-(ssub_MBlkORad+ssub_MBlkIRad)/2+svtg_RSizeMin+ssub_SRollOd 
            <Placement y="xbuf+(ssub_KMountOD/2-svtg_RSizeMin-ssub_SRollOd)/2" block="SMRD"  >
                <Rotation alphax="90"  />
            </Placement>
            
            <Create block="SBMO"  />
            xbuf=-ssub_MBlkORad+svtg_RSizeMin+ssub_SRollOd 
            <Placement y="xbuf+(ssub_KMountOD/2-svtg_RSizeMin-ssub_SRollOd)/2" block="SBMO"  >
            </Placement>
            
            <Create block="SBMI"  />
            xbuf=-ssub_MBlkIRad+svtg_RSizeMin+ssub_SRollOd 
            <Placement y="xbuf+(ssub_KMountOD/2-svtg_RSizeMin-ssub_SRollOd)/2" block="SBMI"  >
            </Placement>
            
        </Block>
        
        <Block name="SMRD" comment="is the aluminum rod carrying the beampipe support"  >
            <Material name="Aluminium"  />
            <Attribute for="SMRD" seen="1" colo="2"  />
            <Shape type="TUBE" rmax="ssub_MRodDia/2" rmin="0.0" dz="(ssub_MBlkORad-ssub_MBlkIRad+ssub_MBlkOLen)/2"  />
        </Block>
        
        <Block name="SBMO" comment="is the outer beampipe support mounting block"  >
            <Material name="G10"  />
            <Attribute for="SBMO" seen="1" colo="3"  />
            <Shape type="BOX" dz="ssub_MBlkHgh/2" dx="ssub_MBlkOWid/2" dy="ssub_MBlkOLen/2"  />
        </Block>
        
        <Block name="SBMI" comment="is the inner beampipe support mounting block"  >
            <Material name="G10"  />
            <Attribute for="SBMO" seen="1" colo="3"  />
            <Shape type="BOX" dz="ssub_MBlkHgh/2" dx="ssub_MBlkIWid/2" dy="ssub_MBlkILen/2"  />
        </Block>
        
        <Block name="SALM" comment="is the aluminum shield mesh"  >
            <Material name="Aluminium"  />
            <Attribute for="SALM" seen="1" colo="2"  />
            <Shape type="TUBE" rmax="ssld_AlMeshOd/2" rmin="ssld_AlMeshId/2" dz="ssld_AlMshThk/2"  />
        </Block>
        
        <Block name="SISH" comment="is the inner shield cylinder"  >
            <Material name="ALKAP"  />
            <Attribute for="SISH" seen="1" colo="3"  />
            <Shape type="TUBE" rmax="ssld_SInROut" rmin="ssld_SInRInn" dz="ssld_SInLen"  />
        </Block>
        
        <Block name="SSSH" comment="is the separation shield cylinder"  >
            <Material name="SSDALMY"  />
            <Attribute for="SSSH" seen="1" colo="3"  />
            <Shape type="TUBE" rmax="ssld_SSepROut" rmin="ssld_SSepRInn" dz="ssld_SSepLen"  />
        </Block>
        
        <Block name="SOSH" comment="is the separation shield cylinder"  >
            <Material name="SSDALMY"  />
            <Attribute for="SOSH" seen="1" colo="3"  />
            <Shape type="TUBE" rmax="ssld_SOutROut" rmin="ssld_SOutRInn" dz="ssld_SOutLen"  />
        </Block>
        
    </Module>
    


</Document>

