<Document file="StarVMC/Geometry/MutdGeo/MutdGeo.xml">

    <Module name="MUTDGEO" comment=" is the geometry of the STAR muon trigger system "  >
        <CDE  >
            AGECOM
            GCUNIT
        </CDE>
        
        <Author name="Maxim Potekhin"  />
        <Created date="   21 March 2006 "  />

        <Content  >
            MUTD,MUSC,MTRA,MXTR,MMTC,MXSA,MPMT,MMRP
        </Content>
       
        <Structure name="MTDG"  >
            <var name="version" type="float"  />
            <var name="Rpmtin" type="float"  />
            <var name="Rpmtout" type="float"  />
            <var name="Rmrpcin" type="float"  />
            <var name="Rmrpcout" type="float"  />
            <var name="Rmin" type="float"  />
            <var name="Rmax" type="float"  />
            <var name="dz" type="float"  />
            <var name="Length" type="float"  />
            <var name="Radii(2)" type="float"  />
        </Structure>
        

        <Structure name="MTRY"  >
            <var name="Height" type="float"  />
            <var name="Width" type="float"  />
            <var name="Length" type="float"  />
            <var name="WallThk" type="float"  />
            <var name="SupFullH" type="float"  />
            <var name="SupFullW" type="float"  />
            <var name="SupLen" type="float"  />
            <var name="SupBaseT" type="float"  />
            <var name="SupBaseW" type="float"  />
            <var name="SupArmT" type="float"  />
            <var name="CoolOutR" type="float"  />
            <var name="CoolInnR" type="float"  />
            <var name="StripT" type="float"  />
            <var name="FootInse" type="float"  />
            <var name="FootThk" type="float"  />
            <var name="Foot1Len" type="float"  />
            <var name="Foot2Thk" type="float"  />
            <var name="Foot3Len" type="float"  />
        </Structure>
        

        <Structure name="MTBB"  >
            <var name="Slab1Len" type="float"  />
            <var name="Slab2Len" type="float"  />
            <var name="Slab1x" type="float"  />
            <var name="Slab2x" type="float"  />
            <var name="SlabThck" type="float"  />
            <var name="SlabWid" type="float"  />
            <var name="ConvLen" type="float"  />
            <var name="ConvWidM" type="float"  />
            <var name="ConvThck" type="float"  />
            <var name="PmtLen" type="float"  />
            <var name="PmtMaxR" type="float"  />
            <var name="PmtMinR" type="float"  />
            <var name="BaseLen" type="float"  />
            <var name="BaseMaxR" type="float"  />
            <var name="BaseMinR" type="float"  />
            <var name="ElecThck" type="float"  />
            <var name="Wrap" type="float"  />
            <var name="Shim" type="float"  />
        </Structure>
        

        <Structure name="MOFF"  >
            <var name="BoxWidth" type="float"  />
            <var name="SlatLen" type="float"  />
            <var name="Slat01z" type="float"  />
            <var name="Slat02z" type="float"  />
            <var name="Slat03z" type="float"  />
            <var name="Slat04z" type="float"  />
            <var name="Slat05z" type="float"  />
            <var name="Slat06z" type="float"  />
            <var name="Slat07z" type="float"  />
            <var name="Slat08z" type="float"  />
            <var name="Slat09z" type="float"  />
            <var name="Slat10z" type="float"  />
            <var name="SlatThck" type="float"  />
            <var name="SlatWid" type="float"  />
            <var name="SlatAng" type="float"  />
            <var name="PmtLen" type="float"  />
            <var name="PmtMaxR" type="float"  />
            <var name="PmtMinR" type="float"  />
            <var name="BaseLen" type="float"  />
            <var name="BaseMaxR" type="float"  />
            <var name="BaseMinR" type="float"  />
            <var name="SockLen" type="float"  />
            <var name="CellWid" type="float"  />
            <var name="CellHgt" type="float"  />
            <var name="ElecHgt" type="float"  />
            <var name="ElecThck" type="float"  />
            <var name="ElecWid" type="float"  />
            <var name="ElecLen" type="float"  />
            <var name="Elec01z" type="float"  />
            <var name="Elec02z" type="float"  />
            <var name="Elec03z" type="float"  />
            <var name="Elec04z" type="float"  />
            <var name="Elec05z" type="float"  />
            <var name="Elec06z" type="float"  />
            <var name="Elec07z" type="float"  />
            <var name="Elec08z" type="float"  />
            <var name="Elec09z" type="float"  />
            <var name="Elec10z" type="float"  />
            <var name="RailThck" type="float"  />
            <var name="RailWid" type="float"  />
            <var name="CoolInnR" type="float"  />
            <var name="CoolOutR" type="float"  />
        </Structure>
        


        <varlist type="INTEGER"  >
            Ntray,iwid
        </varlist>
        
        <varlist type="REAL"  >
            BarPhi,xpos,ypos,zpos,sublen,subcen,totlen
        </varlist>
        
        <Fill name="MTDG" comment="Muon system basic dimensions"  >
            <var name="version" value="1" comment=" version number "  />

            <var name="Rpmtin" value="364.25" comment=" pmt box inner radius "  />
            <var name="Rpmtout" value="386.15" comment=" pmt box outer radius       "  />
            <var name="Rmrpcin" value="403.60" comment=" mrpc box inner radius "  />
            <var name="Rmrpcout" value="411.22" comment=" mrpc box outer radius       "  />

            <var name="Rmin"   value="390.00" comment=" inner radius of the magnet system "  />
            <var name="Rmax"   value="435.00" comment=" outer radius of the magnet system "  />
            <var name="dz"     value="246.0" comment=" CTB/TOF tube half length "  />
            <var name="Length" value="500.00" comment=" slightly longer than full length of the trays "  />
            <var name="Radii"  value="{390.093,420.093}" comment=" radii of trays "  />
        </Fill>
        

        <Fill name="MTRY" comment="general tray stats"  >
            <var name="Height" value="8.89" comment=" tray height(8.89) "  />
            <var name="Width" value="21.59" comment=" full tray width "  />
            <var name="Length" value="241.62" comment=" full tray length(241.62) "  />
            <var name="WallThk" value="0.13" comment=" tray wall thickness "  />
            <var name="SupFullH" value="2.03" comment=" support height (radial) "  />
            <var name="SupFullW" value="15.24" comment=" support full width with arms "  />
            <var name="SupLen" value="215.9" comment=" support length "  />
            <var name="SupBaseW" value="9.22" comment=" support base width "  />
            <var name="SupBaseT" value="0.32" comment=" support base thickness   "  />
            <var name="SupArmT" value="0.64" comment=" support arm  thickness "  />
            <var name="CoolOutR" value="0.80" comment=" Cooling channel outer radius "  />
            <var name="CoolInnR" value="0.48" comment=" Cooling channel inner radius "  />
            <var name="StripT" value="0.08" comment=" Thickness of polyethylene strip on bottom "  />
            <var name="FootInse" value="1.06" comment=" foot inset from tray edge "  />
            <var name="FootThk" value="0.23" comment=" thickness of foot material "  />
            <var name="Foot1len" value="1.68" comment=" length (in section) of first part of foot "  />
            <var name="Foot2Thk" value="1.16" comment=" thickness of second foot section "  />
            <var name="Foot3Len" value="2.16" comment=" length of third part of foot "  />
        </Fill>
        

        <Fill name="MTBB" comment="barrel trigger stats"  >
            <var name="Slab1Len" value="112.5" comment=" first slab (B) length "  />
            <var name="Slab2Len" value="130.0" comment=" second slab (A)length  "  />
            <var name="Slab1x" value="5.84" comment=" first slab (B) x position "  />
            <var name="Slab2x" value="2.67" comment=" second slab (A) x position "  />
            <var name="SlabThck" value="1.0" comment=" scintillator slab thicknesses "  />
            <var name="SlabWid" value="21.0" comment=" scintillator slab width "  />
            <var name="ConvLen" value="8.5" comment=" optical converter length "  />
            <var name="ConvWidM" value="4.0" comment=" optical convertor min width "  />
            <var name="ConvThck" value="0.92" comment=" optical convertor thickness "  />
            <var name="PmtLen" value="5.0" comment=" PMT length "  />
            <var name="PmtMaxR" value="2.0" comment=" PMT max radius "  />
            <var name="PmtMinR" value="1.84" comment=" PMT min radius "  />
            <var name="BaseLen" value="4.0" comment=" Base length "  />
            <var name="BaseMaxR" value="2.13" comment=" Base max radius "  />
            <var name="baseMinR" value="1.0" comment=" Base min radius "  />
            <var name="ElecThck" value="0.25" comment=" readout electronics thickness "  />
            <var name="Wrap" value="0.13" comment=" thickness of Tyvek + black plastic "  />
            <var name="Shim" value="0.26" comment=" thickness of shim to position slat 2 "  />
        </Fill>
        

        <Fill name="MOFF" comment="time of flight stats"  >
            <var name="BoxWidth" value="21.0875" comment=" width of the 5w box (BMTD) "  />
            <var name="SlatLen" value="20.0" comment=" slat length "  />
            <var name="Slat01z" value="104.938" comment=" 5_wide_slat Z position for row 1 from AutoCAD "  />
            <var name="Slat02z" value="84.060" comment=" 4_wide_slat Z position for row 2 from AutoCAD "  />
            <var name="Slat03z" value="62.860" comment=" 4_wide_slat Z position for row 3 from AutoCAD "  />
            <var name="Slat04z" value="41.254" comment=" 4_wide_slat Z position for row 4 from AutoCAD "  />
            <var name="Slat05z" value="18.966" comment=" 4_wide_slat Z position for row 5 from AutoCAD "  />
            <var name="Slat06z" value="-3.954" comment=" 4_wide_slat Z position for row 6 from AutoCAD "  />
            <var name="Slat07z" value="-27.528" comment=" 4_wide_slat Z position for row 7 from AutoCAD "  />
            <var name="Slat08z" value="-51.254" comment=" 4_wide_slat Z position for row 8 from AutoCAD "  />
            <var name="Slat09z" value="-75.634" comment=" 4_wide_slat Z position for row 9 from AutoCAD "  />
            <var name="Slat10z" value="-100.683" comment=" 4_wide_slat Z position for row 10 from AutoCAD "  />
            <var name="SlatThck" value="2.0" comment=" scintillator slab thicknesses "  />
            <var name="SlatWid" value="3.81" comment=" scintillator slab width (4.0) "  />
            <var name="SlatAng" value="11.5" comment=" slat assy. angle w.r.t. tray "  />
            <var name="PmtLen" value="5.0" comment=" PMT length "  />
            <var name="PmtMaxR" value="1.91" comment=" PMT max radius "  />
            <var name="PmtMinR" value="1.8" comment=" PMT min radius "  />
            <var name="SockLen" value="1.0" comment=" thickness of socket "  />
            <var name="BaseLen" value="5.0" comment=" Base length "  />
            <var name="BaseMaxR" value="1.91" comment=" Base max radius "  />
            <var name="baseMinR" value="1.8" comment=" Base min radius   "  />
            <var name="CellWid" value="3.1" comment=" Cell width  "  />
            <var name="CellHgt" value="1.6" comment=" Cell height "  />
            <var name="ElecHgt" value="3.0" comment=" FEE Board height in tray... (rails/loop too). "  />
            <var name="ElecThck" value="0.17" comment=" FEE Board thickness (67 mils) "  />
            <var name="ElecWid" value="20.3" comment=" FEE Board width (was 21) "  />
            <var name="ElecLen" value="5.715" comment=" FEE Board length (was 16) "  />
            <var name="Elec01z" value="105.610" comment=" FEE Z position for row 1 from AutoCAD "  />
            <var name="Elec02z" value="84.573" comment=" FEE Z position for row 2 from AutoCAD "  />
            <var name="Elec03z" value="63.224" comment=" FEE Z position for row 3 from AutoCAD "  />
            <var name="Elec04z" value="41.667" comment=" FEE Z position for row 4 from AutoCAD "  />
            <var name="Elec05z" value="19.379" comment=" FEE Z position for row 5 from AutoCAD "  />
            <var name="Elec06z" value="-3.542" comment=" FEE Z position for row 6 from AutoCAD "  />
            <var name="Elec07z" value="-27.165" comment=" FEE Z position for row 7 from AutoCAD "  />
            <var name="Elec08z" value="-50.841" comment=" FEE Z position for row 8 from AutoCAD "  />
            <var name="Elec09z" value="-75.170" comment=" FEE Z position for row 9 from AutoCAD "  />
            <var name="Elec10z" value="-100.270" comment=" FEE Z position for row 10 from AutoCAD "  />
            <var name="RailThck" value="0.2" comment=" Cooling loop rail thickness "  />
            <var name="RailWid" value="1.5" comment=" Cooling loop rail width "  />
            <var name="CoolOutR" value="0.635" comment=" Cooling loop pipe outer radius, 0.5in/2 "  />
            <var name="CoolInnR" value="0.561" comment=" Cooling loop pipe inner radius, (0.5in-0.058in)/2 "  />
        </Fill>
        
        <Use struct="MTDG"  />
        <Use struct="MTRY"  />
        <Use struct="MTBB"  />
        <Use struct="MOFF"  />

        <Mixture name="RPCgas" dens="4.55E-3"  >
            <Component name="H" a="1" z="1" w="0.90*2*1./102.+0.+0.05*10*1./58."  />
            <Component name="C" a="12" z="6" w="0.90*2*12./102.+0.+0.05*4*12./58."  />
            <Component name="F" a="19" z="9" w="0.90*4*19./102.+0.05*6*19./146.+0."  />
            <Component name="S" a="32" z="16" w="0.+0.05*1*32./146.+0."  />
        </Mixture>
        

        <Create    block="MUTD"  />
        <Placement block="MUTD" in="Cave" />
        

<!--                         Muon Detector Mother                           -->
        <Block name="MUTD" comment="is the muon detector mother"  >

            <Material name="Air"  />
            <Medium name="Standard"  />
            <Attribute for="MAGP" seen="0" colo="1"  />

            <Shape type="TUBE" rmax="MTDG_Rmax" rmin="MTDG_Rpmtin+1" dz="MTDG_Length/2"  />

            BarPhi = 360.0/30.0

            <Create block="MUSC"  />
            <Placement block="MUSC"  >
                <Rotation alphaz="BarPhi/2.0+BarPhi"  />
            </Placement>            

        </Block>
        
<!--                         Muon Detector Sector                           -->
        <Block name="MUSC" comment="is a sector of MUON Trigger Barrel Scintillators"  >

            <Attribute for="MUSC" seen="0" colo="1"  />
            <Shape type="Tubs" phi2="5.0" phi1="-5.0"  />

            <Do var="Ntray" from="1" to="2"  >

                <Create    block="MTRA"  />
                <Placement block="MTRA" x="MTDG_Radii(Ntray)+(MTRY_SupFullH+MTRY_height+MTRY_StripT)/2.0" />
               
                <Create    block="MPMT"  />
                <Placement block="MPMT" y="0" x="3.12/2+1.5+MTDG_Rpmtin" z="0" />
                
                <Create    block="MMRP"  />
                <Placement block="MMRP" y="0" x="2.50/2.+MTDG_Rmrpcin" z="0" />
            </Do>
            

        </Block>
        
        <Block name="MTRA" comment="is one full tray plus supporting structure for CTB/TOF"  >

            <Attribute for="MTRA" seen="1" colo="2"  />
            <Shape type="BOX" dx="(MTRY_SupFullH+MTRY_height+MTRY_StripT)/2" dy="MTRY_Width/2"  />

            <Create    block="MXTR"  />
            <Placement block="MXTR" x="(MTRY_SupFullH+MTRY_StripT)/2" z="(MTDG_dz-MTRY_length)/2" />            

        </Block>
        
        <Block name="MXTR" comment="is a Main TRay covering box for CTB or TOF"  >
            <Attribute for="MXTR" seen="1" colo="2"  />
            <Material name="Aluminium"  />

            <Shape type="BOX" dz="MTRY_length/2" dx="MTRY_height/2"  />
            <Create    block="MMTC"  />
            <Placement block="MMTC"  />
            
        </Block>
        
        <Block name="MMTC" comment="is the Main Tray Cavity filled with the details for CTB"  >
            <Attribute for="MMTC" seen="1" colo="5"  />
            <Material name="Air"  />
            <Shape type="BOX" dz="MTRY_Length/2-MTRY_WallThk" dx="MTRY_height/2-MTRY_WallThk" dy="MTRY_Width/2-MTRY_WallThk"  />


            zpos  =  (MTRY_length-MTBB_Slab1Len)/2-MTRY_WallThk-MTBB_Wrap 
            xpos  =  -MTRY_Height/2+MTBB_Slab1x 

            <Create    block="MXSA"  />
            <Placement block="MXSA" x="xpos" z="zpos" 
                       dz="MTBB_Slab1Len/2" 
                       dx="MTBB_SlabThck/2" 
                       dy="MTBB_SlabWid/2" />

            
            zpos  =  (MTRY_length-MTBB_Slab2Len)/2-MTRY_WallThk-MTBB_Wrap-MTBB_Shim 
            xpos  =  -MTRY_Height/2+MTBB_Slab2x 

            <Create    block="MXSA"  />
            <Placement block="MXSA" x="xpos" z="-zpos"
                       dz="MTBB_Slab2Len/2" 
                       dx="MTBB_SlabThck/2" 
                       dy="MTBB_SlabWid/2" />

            
        </Block>
        
        <Block name="MXSA" comment="is the active trigger scintillator SLAB for ctb"  >
            <Attribute for="MXSA" seen="1" colo="3"  />
            <Material name="polystyren"  />
            <Medium name="sensitive" isvol="1 "  />
            <Shape type="BOX" dz="0" dx="0" dy="0"  />

            <Instrument block="MXSA" >
                <Hit meas="x" bins="0.01" opts="S" />
                <Hit meas="y" bins="0.01"          />
                <Hit meas="z" bins="0.01"          />
                <Hit meas="ptot" nbits="18" min="0" max="100" />
                <Hit meas="cx"   nbits="10" />
                <Hit meas="cy"   nbits="10" />
                <Hit meas="cz"   nbits="10" />
                <Hit meas="sleng" bins="0.1" min="0" max="500" />
                <Hit meas="tof"  nbits="16"  min="0" max="1.0E-6" />
                <Hit meas="step"  bins="0.01" />
                <Hit meas="eloss" nbits="16" min="0" max="0.01" />
           </Instrument>
        </Block>
        

        <Block name="MPMT" comment="is a Main TRay covering box for PMT"  >
            <Attribute for="MPMT" seen="1" colo="3"  />
            <Material name="Aluminium"  />
            <Shape type="BOX" dz="MTDG_length/2" dx="3.12/2." dy="57.20/2."  />
        </Block>
        
        <Block name="MMRP" comment="is a Main TRay covering box for MRPC"  >
            <Attribute for="MMRP" seen="1" colo="3"  />
            <Material name="RPCgas"  />
            <Medium name="sensitive" isvol="1 "  />
            <Shape type="BOX" dz="210.82/2" dx="2.50/2." dy="57.20/2."  />
            <Instrument block="MMRP" >
                <Hit meas="x" bins="0.01" opts="HS" />
                <Hit meas="y" bins="0.01"          />
                <Hit meas="z" bins="0.01"          />
                <Hit meas="ptot" nbits="18" min="0" max="100" />
                <Hit meas="sleng" bins="0.1" min="0" max="500" />
                <Hit meas="tof"  nbits="16"  min="0" max="1.0E-7" />
                <Hit meas="step"  bins="0.01" />
                <Hit meas="eloss" nbits="16" min="0" max="1.0E-6" />
            </Instrument>
        </Block>
        


    </Module>
    

</Document>

