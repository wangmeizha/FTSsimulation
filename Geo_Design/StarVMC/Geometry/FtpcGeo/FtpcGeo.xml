<Document file="StarVMC/Geometry/FtpcGeo/FtpcGeo.xml">

    <Module name="FTPCGEO" comment="  is the geometry of the Forward TPC in STAR "  >
        <Author name="Andreas Schuettauf"  />
        <Created date="  03-Apr-98 "  />
        <CDE  >
            AGECOM
            GCONST
            GCUNIT
        </CDE>
        
        <Content  >
            FTPC,FIAL,FMPT,FOAL,FGAS,FSEN,FSEC,FIFR,FKWI,FFSL,FFCE,FROS,FROM,FROB,FROE,FROL,FROP,FROT,FREL,FRCC,FRCE,FSER,FSRA,FSRB,FSPG,FSPI,FSSM,FSRI,FSBA,FPAD,FFRA
        </Content>
        
        <Structure name="FTPG"  >
            <var name="Version" type="float"  />
            <var name="RinnerMs" type="float"  />
            <var name="RouterMs" type="float"  />
            <var name="RGasOut" type="float"  />
            <var name="RRoM" type="float"  />
            <var name="RElCard" type="float"  />
            <var name="RCooPlm" type="float"  />
            <var name="RCooPle" type="float"  />
            <var name="Zstart" type="float"  />
            <var name="totLen" type="float"  />
            <var name="LayLen" type="float"  />
            <var name="Hitlay" type="float"  />
            <var name="DrInAlL1" type="float"  />
            <var name="DrInAlL2" type="float"  />
            <var name="DrInIsoL" type="float"  />
            <var name="DzKapton" type="float"  />
            <var name="DrIFR" type="float"  />
            <var name="DzIFR" type="float"  />
            <var name="DzEr" type="float"  />
            <var name="DzRoM" type="float"  />
            <var name="DzSuRa" type="float"  />
            <var name="DzSuRb" type="float"  />
            <var name="DzSmPR" type="float"  />
            <var name="DzBiPR" type="float"  />
            <var name="MSRDZ" type="float"  />
            <var name="SERHole" type="float"  />
            <var name="RISRing" type="float"  />
            <var name="ISRingDZ" type="float"  />
            <var name="SBSRDx" type="float"  />
            <var name="SBSRDy" type="float"  />
            <var name="SBSRDz" type="float"  />
            <var name="GasVolDz" type="float"  />
        </Structure>
        
        <Structure name="FFCC"  >
            <var name="Version" type="float"  />
            <var name="StiLeng" type="float"  />
            <var name="StiDia" type="float"  />
            <var name="StiRpos" type="float"  />
            <var name="RiThick" type="float"  />
            <var name="RiDr" type="float"  />
            <var name="RiGap" type="float"  />
            <var name="BarLeng" type="float"  />
            <var name="BarWidt" type="float"  />
            <var name="BarThik" type="float"  />
        </Structure>
        
        <Structure name="FRBD"  >
            <var name="Version" type="float"  />
            <var name="Phi1" type="float"  />
            <var name="Phi2" type="float"  />
            <var name="Phi3" type="float"  />
            <var name="Phi4" type="float"  />
            <var name="Phi5" type="float"  />
            <var name="Phi6" type="float"  />
            <var name="Phi7" type="float"  />
            <var name="Phi8" type="float"  />
            <var name="Phi9" type="float"  />
            <var name="Phi10" type="float"  />
            <var name="Phi11" type="float"  />
            <var name="Phi12" type="float"  />
            <var name="Phi13" type="float"  />
            <var name="XRoM" type="float"  />
            <var name="YRoM" type="float"  />
            <var name="ZRoM" type="float"  />
            <var name="RaHol" type="float"  />
            <var name="XEHol" type="float"  />
            <var name="YEHol" type="float"  />
            <var name="XLHol" type="float"  />
            <var name="YLHol" type="float"  />
            <var name="BOffset" type="float"  />
            <var name="ZOffB" type="float"  />
            <var name="ModLeng" type="float"  />
            <var name="ElectrDX" type="float"  />
            <var name="ElectrDY" type="float"  />
            <var name="ElectrDZ" type="float"  />
            <var name="CoolPlDX" type="float"  />
            <var name="CoolPlDY" type="float"  />
            <var name="CoolPlDZ" type="float"  />
            <var name="EClPlDX" type="float"  />
            <var name="EClPlDY" type="float"  />
            <var name="EClPlDZ" type="float"  />
            <var name="CakeHIR" type="float"  />
            <var name="CakeHOR" type="float"  />
            <var name="CakeHWZ" type="float"  />
            <var name="BoxHX" type="float"  />
            <var name="BoxHY" type="float"  />
            <var name="BoxHZ" type="float"  />
            <var name="EBoxHX" type="float"  />
            <var name="EBoxHY" type="float"  />
            <var name="EBoxHZ" type="float"  />
            <var name="LBoxHX" type="float"  />
            <var name="LBoxHY" type="float"  />
            <var name="LBoxHZ" type="float"  />
        </Structure>
        
        <Structure name="FSSD"  >
            <var name="Version" type="float"  />
            <var name="EringRmn" type="float"  />
            <var name="EringRmx" type="float"  />
            <var name="EringDZ" type="float"  />
            <var name="OEringDZ" type="float"  />
            <var name="ERPosZ" type="float"  />
            <var name="MEringRm" type="float"  />
            <var name="MEringDZ" type="float"  />
            <var name="ERPolyRm" type="float"  />
            <var name="TrapR" type="float"  />
            <var name="PolyR" type="float"  />
            <var name="PolyDZ" type="float"  />
            <var name="PolyIR" type="float"  />
            <var name="PolyOR" type="float"  />
            <var name="TrapX1" type="float"  />
            <var name="TrapX2" type="float"  />
            <var name="TrapDY" type="float"  />
            <var name="TrapDZ" type="float"  />
            <var name="PGonPDZ" type="float"  />
            <var name="SBSDy" type="float"  />
        </Structure>
        
        <varlist type="INTEGER"  >
            k,n,jj,ww,gg,hh,Iring
        </varlist>
        
        <varlist type="INTEGER"  >
            krueck
        </varlist>
        
        <varlist type="REAL"  >
            position,temp1,temp2,temp3
        </varlist>
        
        <varlist type="REAL"  >
            frob_x1
        </varlist>
        
        <varlist type="INTEGER"  >
            Agexist
        </varlist>

        <varlist type="INTEGER"  >
            iflaga(5),iflagb(5)
        </varlist>
        
        <Assign var="iflaga" value="{0,1,1,2,2}"  />
        <Assign var="iflagb" value="{0,0,1,1,2}"  />
        

        <Fill name="FTPG" comment="basic FTPC data"  >
            <var name="Version" value="1" comment=" geometry Version "  />
            <var name="RinnerMs" value="7.55" comment=" innermost radius of envelope "  />
            <var name="RouterMs" value="36.4" comment=" outermost radius of envelope "  />
            <var name="RGasOut" value="30.6" comment=" outer radius of the gas-volume "  />
            <var name="RRoM" value="29.42" comment=" outer radius for one readout module in a ring "  />
            <var name="RElCard" value="32.4" comment=" outer radius for the electronic card   "  />
            <var name="RCooPlm" value="33.7" comment=" outer radius for the cooling plate middle "  />
            <var name="RCooPle" value="36.0" comment=" outer radius for the cooling plate ends "  />
            <var name="Zstart" value="150" comment=" distance from the interaction point "  />
            <var name="totLen" value="119" comment=" overall length "  />
            <var name="LayLen" value="2.0" comment=" thickness of the sensitive Layer "  />
            <var name="Hitlay" value="10" comment=" # of padrows in one FTPC : 10 "  />
            <var name="DrInAlL1" value="0.05" comment=" thickness of inner Al-Layer of inner Tube "  />
            <var name="DrInAlL2" value="0.05" comment=" thickness of outer Al-Layer of inner Tube "  />
            <var name="DrInIsoL" value="0.4" comment=" thickness of plastic insulation of inner tube "  />
            <var name="DzKapton" value="0.02" comment=" thickness of a double kapton-windows "  />
            <var name="DrIFR" value="1.15" comment=" thickness (r) of inner flange ring "  />
            <var name="DzIFR" value="0.4" comment=" thickness (z) of inner flange ring "  />
            <var name="DzER" value="10.35" comment=" thickness (z) of Endring "  />
            <var name="DzRoM" value="21.3" comment=" Distance of one Readout module Ring to coor.  "  />
            <var name="DzSuRa" value="10.65" comment=" Distance to inner(a) Support Ring from coor.  "  />
            <var name="DzSuRb" value="31.95" comment=" Distance to outer(b) Support Ring from coor. "  />
            <var name="DzSmPR" value="8.5" comment=" Distance Small between to Pad Rows "  />
            <var name="DzBiPR" value="12.80" comment=" Distance Big between to Pad Rows   "  />
            <var name="MSRDZ" value="4.1" comment=" half length of main support ring "  />
            <var name="SERHole" value="0.5" comment=" half Support End Ring Hole length Z "  />
            <var name="RISRing" value="30.8" comment=" outer Radius for innner Support Ring "  />
            <var name="ISRingDZ" value="3.1" comment=" Half length for inner Support Ring "  />
            <var name="SBSRDx" value="0.7" comment=" Half width of Stabil. Block for Supp.Ring  "  />
            <var name="SBSRDy" value="2.8" comment=" Half thick. of Stabil. Block for Supp.Ring  "  />
            <var name="SBSRDz" value="3.1" comment=" Half length of Stabil. Block for Supp.Ring "  />
            <var name="GasVolDz" value="59.5" comment=" Half length of active volume "  />
        </Fill>
        
        <Fill name="FFCC" comment="Field-Cage Caps data"  >
            <var name="Version" value="1" comment=" geometry Version "  />
            <var name="StiLeng" value="21" comment=" lenth of the ceramic-holders "  />
            <var name="StiDia" value=".8" comment=" diameter of ceramic-holders "  />
            <var name="StiRpos" value="19.25" comment=" r-pos. of ceramic-holders "  />
            <var name="RiThick" value=".06" comment=" thickness of the FC rings "  />
            <var name="RiDr" value="1" comment=" width (r) if the FC rings "  />
            <var name="RiGap" value=".3" comment=" gap between two FC rings "  />
            <var name="BarLeng" value="29" comment=" length of stabilizer bar for FC  "  />
            <var name="BarWidt" value="2" comment=" width of stabilizer bar for FC "  />
            <var name="BarThik" value=".8" comment=" thickness of stabilizer bar for FC   "  />
        </Fill>
        
        <Fill name="FRBD" comment="Readout Barrel Design"  >
            <var name="Version" value="1" comment=" geometry Version "  />
            <var name="Phi1" value="0" comment=" phi 1 "  />
            <var name="Phi2" value="30" comment=" phi 2 "  />
            <var name="Phi3" value="60" comment=" phi 3 "  />
            <var name="Phi4" value="90" comment=" phi 4   "  />
            <var name="Phi5" value="120" comment=" phi 5 "  />
            <var name="Phi6" value="150" comment=" phi 6 "  />
            <var name="Phi7" value="180" comment=" phi 7 "  />
            <var name="Phi8" value="210" comment=" phi 8 "  />
            <var name="Phi9" value="240" comment=" phi 9 "  />
            <var name="Phi10" value="270" comment=" phi 10 "  />
            <var name="Phi11" value="300" comment=" phi 11 "  />
            <var name="Phi12" value="330" comment=" phi 12 "  />
            <var name="Phi13" value="360" comment=" phi 13  "  />
            <var name="XRoM" value="32.6" comment=" X lenght of one Readout Module  "  />
            <var name="YRoM" value="5.77" comment=" Y lenght of one Readout Module  "  />
            <var name="ZRoM" value="15.1" comment=" Z lenght of one Readout Module  "  />
            <var name="RaHol" value="29.508" comment=" Radius for the circle cut in RoM "  />
            <var name="XEHol" value="15.8" comment=" X length end hole in RoM   "  />
            <var name="YEHol" value="0.275" comment=" Y length end hole in RoM   "  />
            <var name="XLHol" value="7.05" comment=" X length long hole in RoM   "  />
            <var name="YLHol" value="0.275" comment=" Y length long hole in RoM   "  />
            <var name="BOffset" value="11.92" comment=" Box Offset "  />
            <var name="ZOffB" value="3.15" comment=" Z Offset for Box hole "  />
            <var name="ModLeng" value="16.6" comment=" length (z) of the module "  />
            <var name="ElectrDX" value="12.7" comment=" electronics width "  />
            <var name="ElectrDY" value="0.5" comment=" electronics thickness "  />
            <var name="ElectrDZ" value="8.5" comment=" electronics length "  />
            <var name="CoolPlDX" value="12.7" comment=" cooling plate width "  />
            <var name="CoolPlDY" value="0.025" comment=" cooling plate thickness "  />
            <var name="CoolPlDZ" value="6.6" comment=" cooling plate length "  />
            <var name="EClPlDX" value="1.8" comment=" cooling end plates width "  />
            <var name="EClPlDY" value="0.025" comment=" cooling end plates thickness "  />
            <var name="EClPlDZ" value="6.6" comment=" cooling end plates length "  />
            <var name="CakeHIR" value="25.5" comment=" Cake Hole Inner Radius "  />
            <var name="CakeHOR" value="30.5" comment=" Cake Hole Outer Radius "  />
            <var name="CakeHWZ" value="7.55" comment=" Half Cake Hole Width in Z     "  />
            <var name="BoxHX" value="2.88" comment=" Half Box Hole Length in X "  />
            <var name="BoxHY" value="2.845" comment=" Half Box Hole Length in Y  "  />
            <var name="BoxHZ" value="2.95" comment=" Half Box Hole Length in Z "  />
            <var name="EBoxHX" value="0.5" comment=" Half End Box Hole Length in X "  />
            <var name="EBoxHY" value="2.626" comment=" Half End Box Hole Length in Y  "  />
            <var name="EBoxHZ" value="7.55" comment=" Half End Box Hole Length in Z "  />
            <var name="LBoxHX" value="15.3" comment=" Half Long Box Hole Length in X "  />
            <var name="LBoxHY" value="2.628" comment=" Half Long Box Hole Length in Y  "  />
            <var name="LBoxHZ" value="0.5" comment=" Half Long Box Hole Length in Z         "  />
        </Fill>
        
        <Fill name="FSSD" comment="Support Structure Design"  >
            <var name="Version" value="1" comment=" geometry Version "  />
            <var name="EringRmn" value="30.6" comment=" endring inner radius "  />
            <var name="EringRmx" value="36.4" comment=" endring outer radius "  />
            <var name="EringDZ" value="5.175" comment=" half endring thickness (z)  "  />
            <var name="OEringDZ" value="0.5" comment=" outer endring thickness (z)  "  />
            <var name="ERPosZ" value="4.675" comment=" Position of inner and outer Ring in End Ring "  />
            <var name="MEringRm" value="31.1" comment=" endring medium outer radius         "  />
            <var name="MEringDZ" value="4.175" comment=" medium endring thickness (z)  "  />
            <var name="ERPolyRm" value="31.75" comment=" End ring Polygon max. radius "  />
            <var name="TrapR" value="35.823" comment=" Trapezoid Radius  "  />
            <var name="PolyR" value="33.791" comment=" Polygon Radius "  />
            <var name="PolyDz" value="7.05" comment=" half Polygon length in Z "  />
            <var name="PolyIR" value="0.0" comment=" Polygon Inner Radius   "  />
            <var name="PolyOR" value="1.515" comment=" Polygon Outer Radius "  />
            <var name="TrapX1" value="0.4585" comment=" half small lenght of trapezoid in X "  />
            <var name="TrapX2" value="2.625" comment=" half large lenght of trapezoid in X "  />
            <var name="TrapDY" value="7.05" comment=" half hight of trapezoid in Y "  />
            <var name="TrapDZ" value="0.576" comment=" half width of trapezoid in Z  "  />
            <var name="PGonPDZ" value="3.6" comment=" Position of Polygon in Supp. Struc FSSM (z) "  />
            <var name="SBSDy" value="33.6" comment=" Position for Stabi. Blocks in (y)  "  />
        </Fill>
        

        <Use struct="FTPG" select="version" value="1 "  />
        <Use struct="FFCC" select="version" value="1 "  />
        <Use struct="FRBD" select="version" value="1 "  />
        <Use struct="FSSD" select="version" value="1 "  />
        position=ftpg_Zstart+ftpg_totLen/2 

        <Create block="FTPC"  />

        <If expr="agexist('SVTT')!=0"  >
            <Placement z="position" konly="'MANY'" block="FTPC" in="SVTT"  >
            </Placement>
            
            <Placement z="-position" konly="'MANY'" block="FTPC" in="SVTT"  >
                <Rotation thetaz="180"  />
            </Placement>
            
            <Else  >
                <Placement z="position" konly="'MANY'" block="FTPC" in="CAVE"  >
                </Placement>
                
                <Placement z="-position" konly="'MANY'" block="FTPC" in="CAVE"  >
                    <Rotation thetaz="180"  />
                </Placement>
                
            </Else>
            
        </If>
        

        <Block name="FTPC" comment="is the Forward TPC mother (needed for standalong test only)"  >


            <Material name="Air"  />
            <Medium name="Standard"  />
            <Attribute for="FTPC" seen="1" colo="1"  />
            <Shape type="TUBE" rmax="ftpg_RouterMs" rmin="ftpg_RinnerMs" dz="ftpg_totLen/2"  />

            <Create block="FIAL"  />
            <Placement block="FIAL"  >
            </Placement>
            
            <Create block="FMPT"  />
            <Placement block="FMPT"  >
            </Placement>
            
            <Create block="FOAL"  />
            <Placement block="FOAL"  >
            </Placement>
            
            <Create block="FPAD"  />
            <Placement block="FPAD"  >
            </Placement>
            
            <Create block="FGAS"  />
            <Placement block="FGAS"  >
            </Placement>
            
            <Create block="FIFR"  />
            <Placement z="(ftpg_totLen/2)-(ftpg_DzIFR/2)-ftpg_DzKapton" block="FIFR"  >
            </Placement>
            
            <Placement z="-((ftpg_totLen/2)-(ftpg_DzIFR/2)-ftpg_DzKapton)" block="FIFR"  >
            </Placement>
            
            <Create block="FKWI"  />
            <Placement z="(ftpg_totLen/2)-ftpg_DzKapton/2" block="FKWI"  >
            </Placement>
            
            <Placement z="-((ftpg_totLen/2)-ftpg_DzKapton/2)" block="FKWI"  >
            </Placement>
            


            <Create block="FSER"  />
            <Placement z="(ftpg_totLen/2.)-(ftpg_DzEr/2.)" block="FSER"  >
            </Placement>
            
            <Placement z="-((ftpg_totLen/2.)-(ftpg_DzEr/2.))" block="FSER"  >
                <Rotation alphax="180"  />
            </Placement>
            


            <Create block="FSSM"  />
            <Placement z="ftpg_DzSuRb" block="FSSM"  >
            </Placement>
            
            <Create block="FSSM"  />
            <Placement z="ftpg_DzSuRa" block="FSSM"  >
            </Placement>
            
            <Create block="FSSM"  />
            <Placement z="-(ftpg_DzSuRa)" block="FSSM"  >
            </Placement>
            
            <Create block="FSSM"  />
            <Placement z="-(ftpg_DzSuRb)" block="FSSM"  >
            </Placement>
            

            <Placement z="-((ftpg_totLen/2)-ftpg_DzKapton/2)" block="FKWI"  >
            </Placement>
            

            temp3=(ftpg_totLen/2)-(ftpg_DzEr)-((frbd_ZRoM-2.)/2.) 

            <Create block="FROS"  />

            <Do var="n" from="1" to="5"  >
                <Placement z="temp3-((ftpg_DzRoM)*(n-1))" block="FROS"  >
                </Placement>
                
            </Do>
            

        </Block>
        


        <Block name="FIAL" comment="is the inner AL-tube of the FTPC"  >
            <Material name="Aluminium"  />
            <Attribute for="FIAL" seen="1" colo="2"  />
            <Shape type="TUBE" rmax="ftpg_RinnerMs+ftpg_DrInAlL1" rmin="ftpg_RinnerMs" dz="(ftpg_totLen/2)-ftpg_DzIFR-ftpg_DzKapton"  />
        </Block>
        
        <Block name="FMPT" comment="is the insulating plastic tube of the drift-electrode"  >
            <Material name="POLYETHYLENE"  />
            <Attribute for="FMPT" seen="1" colo="3"  />
            <Shape type="TUBE" rmax="ftpg_RinnerMs+ftpg_DrInAlL1+ftpg_DrInIsoL" rmin="ftpg_RinnerMs+ftpg_DrInAlL1" dz="(ftpg_totLen/2)-ftpg_DzIFR-ftpg_DzKapton"  />
        </Block>
        
        <Block name="FOAL" comment="is the Al drift-electrode"  >
            <Material name="Aluminium"  />
            <Attribute for="FMPT" seen="1" colo="2"  />
            temp1=ftpg_RinnerMs+ftpg_DrInAlL1+               ftpg_DrInIsoL+ftpg_DrInAlL2 
            <Shape type="TUBE" rmax="temp1" rmin="ftpg_RinnerMs+ftpg_DrInAlL1+ftpg_DrInIsoL" dz="(ftpg_totLen/2)-ftpg_DzIFR-ftpg_DzKapton"  />
        </Block>
        
        <Block name="FGAS" comment="is the FTPC gas volume"  >
            <Material name="Argon_gas"  />
            <Attribute for="FGAS" seen="1" colo="7"  />
            temp1=ftpg_RinnerMs+ftpg_DrInAlL1+               ftpg_DrInIsoL+ftpg_DrInAlL2 
            <Shape type="TUBE" rmax="ftpg_RGasOut" rmin="temp1" dz="ftpg_totLen/2-ftpg_DzKapton"  />

            temp1=ftpg_totLen-2*(ftpg_DzKapton) 
            <Create block="FSEN"  />
            <Do var="k" from="1" to="nint(ftpg_Hitlay)/2"  >
                krueck=nint(ftpg_Hitlay)/2+1-k 
                <Placement z="-((ftpg_DzSmPR/2.)+(ftpg_DzSmPR*iflagb(krueck))+(ftpg_DzBiPR*iflaga(krueck)))" block="FSEN"  >
                </Placement>
                
            </Do>
            
            <Do var="k" from="1" to="nint(ftpg_Hitlay)/2"  >
                <Placement z="(ftpg_DzSmPR/2.)+(ftpg_DzSmPR*iflagb(k))+(ftpg_DzBiPR*iflaga(k))" block="FSEN"  >
                </Placement>
                
            </Do>
            


            <Create block="FFSL"  />
            <Placement y="ffcc_StiRpos" z="(ftpg_totLen/2)-5" block="FFSL"  >
                <Rotation alphaz="frbd_Phi4"  />
                <Rotation ort="yzx"  />
            </Placement>
            
            <Placement y="-ffcc_StiRpos*sin(pi/6.)" x="-ffcc_StiRpos*cos(pi/6.)" z="(ftpg_totLen/2)-5" block="FFSL"  >
                <Rotation alphaz="frbd_Phi8"  />
                <Rotation ort="yzx"  />
            </Placement>
            
            <Placement y="-ffcc_StiRpos*sin(pi/6.)" x="ffcc_StiRpos*cos(pi/6.)" z="(ftpg_totLen/2)-5" block="FFSL"  >
                <Rotation alphaz="-(frbd_Phi2)"  />
                <Rotation ort="yzx"  />
            </Placement>
            
            <Placement y="ffcc_StiRpos" z="-ftpg_totLen/2+5" block="FFSL"  >
                <Rotation alphaz="frbd_Phi4"  />
                <Rotation ort="yzx"  />
            </Placement>
            
            <Placement y="-ffcc_StiRpos*sin(pi/6.)" x="-ffcc_StiRpos*cos(pi/6.)" z="-ftpg_totLen/2+5" block="FFSL"  >
                <Rotation alphaz="frbd_Phi8"  />
                <Rotation ort="yzx"  />
            </Placement>
            
            <Placement y="-ffcc_StiRpos*sin(pi/6.)" x="ffcc_StiRpos*cos(pi/6.)" z="-ftpg_totLen/2+5" block="FFSL"  >
                <Rotation alphaz="-(frbd_Phi2)"  />
                <Rotation ort="yzx"  />
            </Placement>
            
            <Create block="FFCE"  />

            temp1 = ftpg_RinnerMs+ftpg_DrInAlL1+ftpg_DrInIsoL+                 ftpg_DrInAlL2 
            temp2 = ((ftpg_RGasOut-temp1)/2)+temp1 

            <Placement y="temp2" z="(ftpg_totLen/2+ffcc_StiDia/2+ffcc_BarWidt/2)-5" block="FFCE"  >
            </Placement>
            
            <Placement y="-temp2*sin(pi/6.)" x="-temp2*cos(pi/6.)" z="(ftpg_totLen/2+ffcc_StiDia/2+ffcc_BarWidt/2)-5" block="FFCE"  >
                <Rotation alphaz="-(frbd_Phi3)"  />
            </Placement>
            
            <Placement y="-temp2*sin(pi/6.)" x="temp2*cos(pi/6.)" z="(ftpg_totLen/2+ffcc_StiDia/2+ffcc_BarWidt/2)-5" block="FFCE"  >
                <Rotation alphaz="frbd_Phi3"  />
            </Placement>
            
            <Do var="Iring" from="17" to="1" step="-1"  >
                <Create block="FFRA"  />
                <Placement z="(ftpg_totLen/2)-5-ffcc_StiDia/2" block="FFRA"  >
                </Placement>
                
                <Placement z="-ftpg_totLen/2+5+ffcc_StiDia/2" block="FFRA"  >
                </Placement>
                
            </Do>
            
        </Block>
        
        <Block name="FSEN" comment="is the sensitive gas volume"  >
            <Material name="Argon_gas"  />
            <Medium name="sensitive" isvol="1 "  />
            <Attribute for="FSEN" seen="1" colo="4"  />

            temp1=ftpg_RinnerMs+ftpg_DrInAlL1+             ftpg_DrInIsoL+ftpg_DrInAlL2 

            <Shape type="TUBE" rmax="ftpg_RGasOut" rmin="temp1" dz="ftpg_LayLen/2"  />
            <Create block="FSEC"  />
        </Block>
        
        <Block name="FSEC" comment="is a sensitive gas sector"  >

            <Shape type="DIVISION" ndiv="6" c0="30" iaxis="2"  />

            <Instrument block="FSEC">
                  <Hit meas="x"  bins="0.0003" opts="S" />
                  <Hit meas="y"  bins="0.0003"          />
                  <Hit meas="z"  bins="0.0003"          />
                  <Hit meas="cx" nbits="10"             />
                  <Hit meas="cy" nbits="10"             />
                  <Hit meas="cz" nbits="10"             />
                  <Hit meas="ptot"  nbits="18"  min="0"  max="100"    />
                  <Hit meas="sleng"  bins="0.1" min="0"  max="500"    />
                  <Hit meas="tof"   nbits="16"  min="0"  max="1.0E-6" />
                  <Hit meas="lgam"  nbits="16"  min="-2" max="+2"     />
                  <Hit meas="step"  nbits="11"  min="0"  max="10"     />
                  <Hit meas="elos"  nbits="21"  min="0"  max="0.01"   />
            </Instrument>

        </Block>
        
        <Block name="FIFR" comment="is the Al inner flange ring"  >
            <Material name="Aluminium"  />
            <Attribute for="FMPT" seen="1" colo="2"  />
            <Shape type="TUBE" rmax="ftpg_RinnerMs+ftpg_DrIFR" rmin="ftpg_RinnerMs" dz="ftpg_DzIFR/2"  />
        </Block>
        
        <Block name="FKWI" comment="is the double Kapton window"  >
            <Material name="MYLAR"  />
            <Attribute for="FMPT" seen="1" colo="3"  />
            <Shape type="TUBE" rmax="ftpg_RGasOut" rmin="ftpg_RinnerMs" dz="ftpg_DzKapton/2"  />
        </Block>
        
        <Block name="FFSL" comment="is ceramic holder for fieldcage rings"  >
            <Material a="20.719" name="PYREX" dens="2.23" radl="12.6" absl="50.7" z="10.307"  />
            <Attribute for="FFSL" seen="1" colo="6"  />
            <Shape type="TUBE" rmax="ffcc_StiDia/2" rmin="0" dz="ffcc_StiLeng/2"  />
        </Block>
        
        <Block name="FFCE" comment="is the Fildcage Enhanced Support Structure"  >
            <Material name="Aluminium"  />
            <Attribute for="FFCE" seen="1" colo="2"  />

            temp1 = ftpg_RinnerMs+ftpg_DrInAlL1+ftpg_DrInIsoL+                 ftpg_DrInAlL2 

            <Shape type="BOX" dz="ffcc_BarWidt/2" dx="ffcc_BarThik/2" dy="(ftpg_RGasOut-temp1)/2"  />
        </Block>
        
        <Block name="FROS" comment="is one Ring of Readout Modules in the support Structure"  >
            <Material name="Air"  />
            <Attribute for="FROS" seen="0" colo="1"  />
            <Shape type="TUBE" rmax="ftpg_RouterMs" rmin="ftpg_RinnerMs" dz="ftpg_RinnerMs"  />

            <Create block="FROM"  />
            <Create block="FREL"  />
            <Create block="FRCC"  />
            <Create block="FRCE"  />

            <Create block="FROT"  />

            <Do var="gg" from="frbd_Phi2" to="frbd_Phi12" step="frbd_Phi3"  >
                <Placement y="-fssd_TrapR*sin(degrad*gg)" x="-fssd_TrapR*cos(degrad*gg)" block="FROT"  >
                    <Rotation alphaz="gg"  />
                    <Rotation ort="yzx"  />
                </Placement>
                
            </Do>
            
            <Create block="FROP"  />

            <Do var="hh" from="frbd_Phi1" to="frbd_Phi11" step="frbd_Phi3"  >
                <Placement y="fssd_PolyR*(cos(degrad*hh))" x="fssd_PolyR*(sin(degrad*hh))" block="FROP"  >
                    <Rotation alphaz="hh"  />
                </Placement>
                
            </Do>
            


            <Do var="ww" from="frbd_Phi2" to="frbd_Phi12" step="frbd_Phi3"  >
                <Placement y="ftpg_RRoM*cos(degrad*ww)" x="-29.42*sin(degrad*ww)" konly="'MANY'" block="FROM"  >
                    <Rotation alphaz="ww+180"  />
                </Placement>
                
                <Placement y="(ftpg_RElCard+frbd_ElectrDY)*cos(degrad*ww)" x="-(ftpg_RElCard+frbd_ElectrDY)*sin(degrad*ww)" block="FREL"  >
                    <Rotation alphaz="ww"  />
                </Placement>
                
                <Placement y="ftpg_RCooPlm*cos(degrad*ww)" x="-ftpg_RCooPlm*sin(degrad*ww)" block="FRCC"  >
                    <Rotation alphaz="ww"  />
                </Placement>
                
                <Placement y="ftpg_RCooPle*cos(degrad*(ww+30-6.5))" x="-ftpg_RCooPle*sin(degrad*(ww+30-6.5))" block="FRCE"  >
                    <Rotation alphaz="(ww+22)"  />
                </Placement>
                

                <Placement y="ftpg_RCooPle*cos(degrad*(ww-30+6.5))" x="-ftpg_RCooPle*sin(degrad*(ww-30+6.5))" block="FRCE"  >
                    <Rotation alphaz="(ww-22)"  />
                </Placement>
                

            </Do>
            

        </Block>
        
        <Block name="FROM" comment="is one Module of the Readout Chamber"  >
            <Material name="Aluminium"  />
            <Attribute for="FROM" seen="1" colo="6"  />
            <Shape type="BOX" dz="frbd_ZRoM/2." dx="frbd_XRoM/2." dy="frbd_YRoM/2."  />


            <Create block="FROE"  />
            <Placement y="frbd_YEHol" x="frbd_XEHol" konly="'MANY'" block="FROE"  >
            </Placement>
            
            <Create block="FROE"  />
            <Placement y="frbd_YEHol" x="-(frbd_XEHol)" konly="'MANY'" block="FROE"  >
            </Placement>
            

            <Create block="FROL"  />
            <Placement y="frbd_YLHol" z="frbd_XLHol" konly="'MANY'" block="FROL"  >
            </Placement>
            
            <Create block="FROL"  />
            <Placement y="frbd_YLHol" z="-(frbd_XLHol)" konly="'MANY'" block="FROL"  >
            </Placement>
            
            frob_x1 = -(frbd_BOffset) 

            <Do var="jj" from="1" to="5"  >
                <Create block="FROB"  />
                <Placement x="frob_x1" z="frbd_ZOffB" konly="'MANY'" block="FROB"  >
                    <Rotation alphay="frbd_Phi1"  />
                </Placement>
                
                <Create block="FROB"  />
                <Placement x="frob_x1" z="-(frbd_ZOffB)" konly="'MANY'" block="FROB"  >
                    <Rotation alphay="frbd_Phi1"  />
                </Placement>
                
                frob_x1 = frob_x1 + 5.96  
            </Do>
            
        </Block>
        
        <Block name="FROB" comment="are the Box Holes in the Readout Chamber"  >
            <Material name="Air"  />
            <Attribute for="FROB" seen="1" colo="1"  />
            <Shape type="BOX" dz="frbd_BoxHZ" dx="frbd_BoxHX" dy="frbd_BoxHY"  />
        </Block>
        
        <Block name="FROE" comment="are the End Box Holes in the Readout Chamber"  >
            <Material name="Air"  />
            <Attribute for="FROE" seen="1" colo="3"  />
            <Shape type="BOX" dz="frbd_EBoxHZ" dx="frbd_EBoxHX" dy="frbd_EBoxHY"  />
        </Block>
        
        <Block name="FROL" comment="are the Length side Box Holes in the Readout Chamber"  >
            <Material name="Air"  />
            <Attribute for="FROL" seen="1" colo="2"  />
            <Shape type="BOX" dz="frbd_LBoxHZ" dx="frbd_LBoxHX" dy="frbd_LBoxHY"  />
        </Block>
        
        <Block name="FROP" comment="are the Polygon part of the support bar"  >
            <Material name="Aluminium"  />
            <Attribute for="FROP" seen="1" colo="1"  />
            <Shape type="PGON" zi="{-(fssd_PolyDZ),fssd_PolyDZ}" rmn="{fssd_PolyIR,fssd_PolyIR}" rmx="{fssd_PolyOR,fssd_PolyOR}" nz="2" npdiv="3" phi1="frbd_Phi2" dphi="frbd_Phi13"  />
        </Block>
        
        <Block name="FROT" comment="are the Trapezoid part of the support bar"  >
            <Material name="Aluminium"  />
            <Attribute for="FROT" seen="1" colo="1"  />
            <Shape type="TRD1" dz="fssd_TrapDZ" dx2="fssd_TrapX2" dx1="fssd_TrapX1" dy="fssd_TrapDY"  />
        </Block>
        
        <Block name="FREL" comment="is the Electronics Layer of the Readout Chamber"  >

        <Mixture name="G10" dens="1.7"  >
            <Component name="Si" a="28.08" z="14" w="0.6*1*28./60."  />
            <Component name="O" a="16" z="8" w="0.6*2*16./60. + 0.4*4*16./174."  />
            <Component name="C" a="12" z="6" w="0.4*8*12./174."  />
            <Component name="H" a="1"  z="1" w="0.4*14*1./174."  />
        </Mixture>
            
            <Material name="G10"  />
            <Attribute for="FREL" seen="1" colo="3"  />
            <Shape type="BOX" dz="frbd_ElectrDZ" dx="frbd_ElectrDX" dy="frbd_ElectrDY"  />
        </Block>
        
        <Block name="FRCC" comment="is the Copper Cooling Layer of the Readout Chamber (Middle)"  >
            <Material name="Copper"  />
            <Attribute for="FRCC" seen="1" colo="2"  />
            <Shape type="BOX" dz="frbd_CoolPlDz" dx="frbd_CoolPlDX" dy="frbd_CoolPlDy"  />
        </Block>
        

        <Block name="FRCE" comment="is the Copper Cooling Layer of the Readout Chamber (Ends)"  >
            <Material name="Copper"  />
            <Attribute for="FRCE" seen="1" colo="2"  />
            <Shape type="BOX" dz="frbd_EClPlDZ" dx="frbd_EClPlDX" dy="frbd_EClPlDY"  />

        </Block>
        
        <Block name="FSER" comment="is the Support End Ring"  >
            <Material name="Air"  />
            <Attribute for="FSER" seen="1" colo="2"  />
            <Shape type="TUBE" rmax="fssd_EringRmx" rmin="fssd_EringRmn" dz="fssd_EringDZ"  />

            <Create block="FSRA"  />
            <Placement z="fssd_ERPosZ" block="FSRA"  >
            </Placement>
            
            <Create block="FSRB"  />
            <Placement block="FSRB"  >
            </Placement>
            
            <Create block="FSPG"  />
            <Placement z="-(fssd_ERPosZ)" block="FSPG"  >
            </Placement>
            

        </Block>
        
        <Block name="FSRA" comment="is the outer Support End Ring"  >
            <Material name="Aluminium"  />
            <Attribute for="FSRA" seen="1" colo="2"  />
            <Shape type="TUBE" rmax="fssd_EringRmx" rmin="fssd_EringRmn" dz="fssd_OEringDZ"  />
        </Block>
        
        <Block name="FSRB" comment="is the medium Support End Ring"  >
            <Material name="Aluminium"  />
            <Attribute for="FSRB" seen="1" colo="2"  />
            <Shape type="TUBE" rmax="fssd_MEringRm" rmin="fssd_EringRmn" dz="fssd_MEringDZ"  />
        </Block>
        
        <Block name="FSSM" comment="is the main Support Stucture Module"  >
            <Material name="Air"  />
            <Attribute for="FSSM" seen="0" colo="1"  />

            <Shape type="TUBE" rmax="ftpg_RouterMs" rmin="ftpg_RinnerMs" dz="ftpg_MSRDZ"  />

            <Create block="FSPG"  />
            <Placement z="fssd_PGonPDZ" block="FSPG"  >
            </Placement>
            
            <Create block="FSRI"  />
            <Placement block="FSRI"  >
            </Placement>
            
            <Create block="FSPG"  />
            <Placement z="-(fssd_PGonPDZ)" block="FSPG"  >
            </Placement>
            

            <Create block="FSBA"  />
            <Placement y="fssd_SBSDy" block="FSBA"  >
                <Rotation alphaz="frbd_Phi1"  />
            </Placement>
            
            <Create block="FSBA"  />
            <Placement y="-(fssd_SBSDy)" block="FSBA"  >
                <Rotation alphaz="frbd_Phi1"  />
            </Placement>
            
            <Create block="FSBA"  />
            <Placement y="fssd_SBSDy*sin(frbd_Phi2*degrad)" x="fssd_SBSDy*cos(frbd_Phi2*degrad)" block="FSBA"  >
                <Rotation alphaz="frbd_Phi11"  />
            </Placement>
            
            <Create block="FSBA"  />
            <Placement y="fssd_SBSDy*sin(frbd_Phi2*degrad)" x="-(fssd_SBSDy*cos(frbd_Phi2*degrad))" block="FSBA"  >
                <Rotation alphaz="frbd_Phi3"  />
            </Placement>
            
            <Create block="FSBA"  />
            <Placement y="-(fssd_SBSDy*sin(frbd_Phi2*degrad))" x="-(fssd_SBSDy*cos(frbd_Phi2*degrad))" block="FSBA"  >
                <Rotation alphaz="frbd_Phi5"  />
            </Placement>
            
            <Create block="FSBA"  />
            <Placement y="-(fssd_SBSDy*sin(frbd_Phi2*degrad))" x="(fssd_SBSDy*cos(frbd_Phi2*degrad))" block="FSBA"  >
                <Rotation alphaz="frbd_Phi9"  />
            </Placement>
            

        </Block>
        
        <Block name="FSPG" comment="is the inner Support End Ring and the outer support Rings"  >
            <Material name="Aluminium"  />
            <Attribute for="FSPG" seen="1" colo="2"  />
            <Shape type="PGON" zi="{-0.5,0.5}" rmn="{fssd_PolyIR,fssd_PolyIR}" rmx="{fssd_ERPolyRm,fssd_ERPolyRm}" nz="2" npdiv="6" phi1="frbd_Phi4" dphi="frbd_Phi13"  />
            <Create block="FSPI"  />
            <Placement block="FSPI"  >
            </Placement>
            
        </Block>
        
        <Block name="FSPI" comment="is the Hole of the inner Support End Ring"  >
            <Material name="Air"  />
            <Attribute for="FSPI" seen="1" colo="1"  />
            <Shape type="TUBE" rmax="ftpg_RGasOut" rmin="ftpg_RinnerMs" dz="ftpg_SERHole"  />
        </Block>
        
        <Block name="FSRI" comment="is the inner Support Ring"  >
            <Material name="Aluminium"  />
            <Attribute for="FSRI" seen="1" colo="1"  />
            <Shape type="TUBE" rmax="ftpg_RISRing" rmin="ftpg_RGasOut" dz="ftpg_ISRingDZ"  />
        </Block>
        

        <Block name="FSBA" comment="are the Stabilizer Block for the inner Support Ring"  >
            <Material name="Aluminium"  />
            <Attribute for="FSBA" seen="1" colo="1"  />
            <Shape type="BOX" dz="ftpg_SBSRDz" dx="ftpg_SBSRDx" dy="ftpg_SBSRDy"  />
        </Block>
        


        <Block name="FPAD" comment="is the Pad plane of the FTPC"  >
            <Material name="MYLAR"  />
            <Attribute for="FPAD" seen="1" colo="2"  />
            <Shape type="TUBE" rmax="ftpg_RGasOut" rmin="ftpg_RGasOut-0.25" dz="ftpg_GasVolDz"  />
        </Block>
        
        <Block name="FFRA" comment="is outermost FC Ring"  >
            <Material name="Aluminium"  />
            <Attribute for="FFRA" seen="1" colo="2"  />
            temp1 = (ftpg_RGasOut-(ftpg_RinnerMs+ftpg_DrInAlL1+                 ftpg_DrInIsoL+ftpg_DrInAlL2))/18 
            temp2 = ftpg_RinnerMs+ftpg_DrInAlL1+ftpg_DrInIsoL+                 ftpg_DrInAlL2 
            <Shape type="TUBE" rmax="temp2+Iring*temp1+ffcc_RiDr/2" rmin="temp2+Iring*temp1-ffcc_RiDr/2" dz="ffcc_RiThick/2"  />
        </Block>
        
    </Module>
    

</Document>

